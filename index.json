{"repository_name":"totem","body":"![totem-logo](https://github.com/icyleaf/totem/raw/master/logo-small.png)\n\n# Totem\n\n[![Language](https://img.shields.io/badge/language-crystal-776791.svg)](https://github.com/crystal-lang/crystal)\n[![Tag](https://img.shields.io/github/tag/icyleaf/totem.svg)](https://github.com/icyleaf/totem/blob/master/CHANGELOG.md)\n[![Build Status](https://img.shields.io/circleci/project/github/icyleaf/totem/master.svg?style=flat)](https://circleci.com/gh/icyleaf/totem)\n\nCrystal configuration with spirit. Inspired from Go's [viper](https://github.com/spf13/viper). Totem Icon by lastspark from [Noun Project](https://thenounproject.com).\n\nConfiguration file formats is always the problem, you want to focus on building awesome things. Totem is here to help with that.\n\nTotem has following features:\n\n- Reading from JSON, YAML, dotenv formats config files or raw string.\n- Reading from environment variables.\n- Reading from remote key-value store systems(redis/etcd).\n- Provide a mechanism to set default values for your different configuration options.\n- Provide an alias system to easily rename parameters without breaking existing code.\n- Write configuration to file with JSON, YAML formats.\n- Convert config to struct with builder.\n\nAnd we keep it minimize and require what you want with adapter and remote provider! **No more dependenices what you do not need**.\nOnly JSON and YAML adapters were auto requires.\n\nUses the following precedence order. Each item takes precedence over the item below it:\n\n- alias\n- override, explicit call to `set`\n- env\n- config\n- kvstores\n- default\n\nTotem configuration keys are case insensitive.\n\n<!-- TOC -->\n\n- [Installation](#installation)\n- [Quick Start](#quick-start)\n  - [Operating configuration](#operating-configuration)\n  - [Loading configuration](#loading-configuration)\n    - [From raw string](#from-raw-string)\n    - [From file](#from-file)\n- [Usage](#usage)\n  - [Load configuration with multiple paths](#load-configuration-with-multiple-paths)\n  - [Set Alias and using alias](#set-alias-and-using-alias)\n  - [Working with nested key](#working-with-nested-key)\n  - [Working with environment variables](#working-with-environment-variables)\n  - [Working with remote providers](#working-with-remote-providers)\n    - [Use redis](#use-redis)\n    - [Use etcd](#use-etcd)\n  - [Iterating configuration](#iterating-configuration)\n  - [Serialization](#serialization)\n  - [Storing configuration to file](#storing-configuration-to-file)\n- [Advanced Usage](#advanced-usage)\n  - [Use config builder](#use-config-builder)\n  - [Write a config adapter](#write-a-config-adapter)\n  - [Write a remote provider](#write-a-remote-provider)\n- [Q & A](#q--a)\n  - [How to debug?](#how-to-debug)\n- [Help and Discussion](#help-and-discussion)\n- [Donate](#donate)\n- [How to Contribute](#how-to-contribute)\n- [You may also like](#you-may-also-like)\n- [License](#license)\n\n<!-- /TOC -->\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  totem:\n    github: icyleaf/totem\n```\n\n## Quick Start\n\n```crystal\nrequire \"totem\"\n```\n\n### Operating configuration\n\n```crystal\ntotem = Totem.new\ntotem.set_default(\"name\", \"foo\")\ntotem.set_defaults({\n  \"age\"    => 18,\n  \"gender\" => \"male\",\n  \"hobbies\" => [\n    \"skateboarding\",\n    \"snowboarding\",\n    \"go\"\n  ]\n})\n\ntotem.get(\"name\").as_s # => \"foo\"\ntotem.get(\"age\").as_i # => 18\ntotem.set(\"name\", \"bar\")\ntotem.alias(alias_key: \"key\", key: \"name\")\ntotem.get(\"name\").as_s # => \"bar\"\ntotem.get(\"key\").as_s # => \"bar\"\n```\n\n### Loading configuration\n\nSupport `JSON`, `YAML` and dotenv data from raw string and file.\n\n#### From raw string\n\nLoad yaml string\n\n```crystal\nraw = <<-EOF\nHacker: true\nname: steve\nhobbies:\n- skateboarding\n- snowboarding\n- go\nclothing:\n  jacket: leather\n  trousers: denim\n  pants:\n    size: large\nage: 35\neyes : brown\nEOF\n\ntotem = Totem.from_yaml raw\ntotem.get(\"Hacker\").as_bool                           # => true\ntotem.get(\"age\").as_i                                 # => 35\ntotem.get(\"clothing\").as_h[\"pants\"].as_h[\"size\"].as_s # => \"large\"\n```\n\nLoad json string\n\n```crystal\nraw = <<-EOF\n{\n  \"id\": \"0001\",\n  \"type\": \"donut\",\n  \"name\": \"Cake\",\n  \"ppu\": 0.55,\n  \"batters\": {\n    \"batter\": [\n      {\n        \"type\": \"Regular\"\n      },\n      {\n        \"type\": \"Chocolate\"\n      },\n      {\n        \"type\": \"Blueberry\"\n      },\n      {\n        \"type\": \"Devil's Food\"\n      }\n    ]\n  }\n}\nEOF\n\ntotem = Totem.from_json raw\ntotem.get(\"name\")                                         # => \"Cake\"\ntotem.get(\"ppu\")                                          # => 0.55\ntotem.get(\"batters\").as_h[\"batter\"].as_a[0].as_h[\"type\"]  # => \"Regular\"\n```\n\nLoad dotenv string\n\n> Add [poncho](https://github.com/icyleaf/poncho) to `shards.yml` and require the adapter.\n\n```crystal\nrequire \"totem\"\nrequire \"totem/config_types/env\"    # Make sure you require\n\nraw = <<-EOF\n# COMMENTS=work\nSTR='foo'\nSTR_WITH_COMMENTS=bar         # str with comment\nSTR_WITH_HASH_SYMBOL=\"abc#123\"#stick comment\nINT=33\nEOF\n\ntotem = Totem.from_env raw\ntotem.get(\"str\")                    # => \"foo\"\ntotem.get(\"str_with_comments\")      # => bar\ntotem.get(\"str_with_hash_symbol\")   # => \"abc#123\"\ntotem.get(\"int\")                    # => \"33\"\n```\n\n#### From file\n\n> Add [poncho](https://github.com/icyleaf/poncho) to `shards.yml` and require the adapter if you need load dotenv file.\n\n```crystal\n# Load yaml file from file with path\ntotem = Totem.from_file \"./spec/fixtures/config.yaml\"\n\n# Load json file from file with multi-paths\ntotem = Totem.from_file \"config.yaml\", [\"/etc\", \".\", \"./spec/fixtures\"]\n\n# Load dotenv file\ntotem = Totem.from_file \"config.env\"\n```\n\n## Usage\n\n### Load configuration with multiple paths\n\nTotem can search multiple paths, but currently a single Totem instance only supports a single\nconfiguration file.\n\n```crystal\ntotem = Totem.new(\"config\", \"/etc/totem/\")  # => New a instance with name and path of config file\ntotem.config_paths << \"~/.totem\"            # => path to look for the config file in\ntotem.config_paths << \"./config\"            # => optionally look for config in the working directory\nbegin\n  totem.load!                               # => Find and read the config file (order by yaml/yml/json/env)\nrescue e\n  puts \"Fatal error config file: #{e.message}\"\nend\n```\n\n### Set Alias and using alias\n\nAliases permit a single value to be referenced by multiple keys\n\n```crystal\ntotem.alias(\"nickname\", \"Name\")\n\ntotem.set(\"name\", \"foo\")\ntotem.set(\"nickname\", \"bar\")\n\ntotem.get(\"name\")       # => \"foo\"\ntotem.get(\"nickname\")   # => \"foo\"\n```\n\n### Working with nested key\n\nAll accessor methods accept nested key:\n\n```crystal\ntotem.set_default(\"profile.user.name\", \"foo\")\ntotem.set(\"profile.user.age\", 13)\ntotem.alias(\"username\", \"profile.user.name\")\ntotem.bind_env(\"profile.user.nickname\", \"PROFILE_USER_NICKNAME\")\ntotem.get(\"profile.user.age\")\n```\n\n### Working with environment variables\n\nTotem has full support for environment variables, example:\n\n```crystal\nENV[\"ID\"] = \"123\"\nENV[\"FOOD\"] = \"Pinapple\"\nENV[\"NAME\"] = \"Polly\"\n\ntotem = Totem.new\n\ntotem.bind_env(\"ID\")\ntotem.get(\"id\").as_i        # => 123\n\ntotem.bind_env(\"f\", \"FOOD\")\ntotem.get(\"f\").as_s         # => \"Pinapple\"\n\ntotem.automative_env\ntotem.get(\"name\").as_s      # => \"Polly\"\n```\n\nWorking with environment prefix:\n\n```crystal\ntotem.automative_env(prefix: \"totem\")\n# Same as\n# totem.env_prefix = \"totem\"\n# totem.automative_env = true\n\ntotem.get(\"id\").as_i    # => 123\ntotem.get(\"food\").as_s  # => \"Pinapple\"\ntotem.get(\"name\").as_s  # => \"Polly\"\n```\n\n### Working with remote providers\n\nTotem retrieve configuration from Key-Value store, which means that you can get your configuration values on the air.\nAvaliable providers is `redis` and `etcd`.\n\n#### Use redis\n\nIt dependency [crystal-redis](https://github.com/stefanwille/crystal-redis) shard. Install it before use.\n\n```crystal\nrequire \"totem\"\nrequire \"totem/remote_providers/redis\"\n\ntotem = Totem.new\ntotem.add_remote(provider: \"redis\", endpoint: \"redis://localhost:6379/0\")\n\ntotem.get(\"user:name\")      # => \"foo\"\ntotem.get(\"user:id\").as_i   # => 123\n```\n\nYou can also get raw data from one key with `path`:\n\n```crystal\ntotem.config_type = \"json\"  # There is no file extension in a stream data, supported extensions are all registed config types in Totem.\ntotem.add_remote(provider: \"redis\", endpoint: \"redis://localhost:6379/0\", path: \"config:development\")\n\ntotem.get(\"user:name\")      # => \"foo\"\ntotem.get(\"user:id\").as_i   # => 123\n```\n\n#### Use etcd\n\nIt dependency [etcd-crystal](https://github.com/icyleaf/etcd-crystal) shard and ONLY works etcd `v2` API. Install it before use.\n\n```crystal\nrequire \"totem\"\nrequire \"totem/remote_providers/etcd\"\n\ntotem = Totem.new\ntotem.add_remote(provider: \"etcd\", endpoint: \"http://localhost:2379\")\n\ntotem.get(\"user:name\")      # => \"foo\"\ntotem.get(\"user:id\").as_i   # => 123\n```\n\nYou can also get raw data from one key with `path`:\n\n```crystal\ntotem.config_type = \"yaml\"  # There is no file extension in a stream data, supported extensions are all registed config types in Totem.\ntotem.add_remote(provider: \"etcd\", endpoint: \"http://localhost:2379\", path: \"/config/development.yaml\")\n\ntotem.get(\"user:name\")      # => \"foo\"\ntotem.get(\"user:id\").as_i   # => 123\n```\n\n### Iterating configuration\n\nIterate in Totem is very easy, you can get `#keys`, `#flat_keys`, `#settings` (a.k.a `#to_h`) even iterating it directly with `#each`:\n\n```crystal\ntotem.settings    # => {\"id\" => 123, \"user\" => {\"name\" => \"foobar\", \"age\" => 20}}\ntotem.keys        # => [\"id\", \"user\"]\ntotem.flat_keys   # => [\"id\", \"user.name\", \"user.age\"]\n\ntotem.each do |key, value|\n  # do something\nend\n```\n\n### Serialization\n\nSerialize configuration to `Struct`, at current stage you can pass a `JSON::Serializable`/`YAML::Serializable` struct to mapping.\n\n```crystal\nstruct Profile\n  include JSON::Serializable\n\n  property name : String\n  property hobbies : Array(String)\n  property age : Int32\n  property eyes : String\nend\n\ntotem = Totem.from_file \"spec/fixtures/config.yaml\"\nprofile = totem.mapping(Profile)\nprofile.name      # => \"steve\"\nprofile.age       # => 35\nprofile.eyes      # => \"brown\"\nprofile.hobbies   # => [\"skateboarding\", \"snowboarding\", \"go\"]\n```\n\nSerialize configuration with part of key:\n\n```crystal\nstruct Clothes\n  include JSON::Serializable\n\n  property jacket : String\n  property trousers : String\n  property pants : Hash(String, String)\nend\n\ntotem = Totem.from_file \"spec/fixtures/config.yaml\"\nclothes = profile.mapping(Clothes, \"clothing\")\n# => Clothes(@jacket=\"leather\", @pants={\"size\" => \"large\"}, @trousers=\"denim\")\n```\n\n### Storing configuration to file\n\nSimple to use `#store!` method.\n\n```crystal\nraw = <<-EOF\nHacker: true\nname: steve\nhobbies:\n- skateboarding\n- snowboarding\n- go\nclothing:\n  jacket: leather\n  trousers: denim\n  pants:\n    size: large\nage: 35\neyes : brown\nEOF\n\ntotem = Totem.from_yaml raw\ntotem.set(\"nickname\", \"Freda\")\ntotem.set(\"eyes\", \"blue\")\ntotem.store!(\"profile.json\")\n```\n\n## Advanced Usage\n\n### Use config builder\n\nYou can generate a configuration with Totem builder with any **Object**.\n\n```crystal\nstruct Configuration\n  include Totem::ConfigBuilder\n\n  build do\n    config_type \"json\"\n    config_paths [\"/etc/totem\", \"~/.config/totem\", \"config/\"]\n  end\nend\n\nconfig = Configuration.configure do |c|\n  c.set_default \"name\", \"foobar\"\nend\n\nconfig[\"name\"] # => \"foobar\"\n```\n\nThe builder also could mapping config to struct.\n\n```crystal\nstruct Profile\n  include Totem::ConfigBuilder\n\n  property name : String\n  property hobbies : Array(String)\n  property age : Int32\n  property eyes : String\n\n  build do\n    config_type \"yaml\"\n    config_paths [\"/etc/totem\", \"~/.config/totem\", \"config/\"]\n  end\nend\n\nprofile = Profile.configure\nprofile.name          # => \"steve\"\nprofile[\"nested.key\"] # => \"foo\"\n```\n\n### Write a config adapter\n\nCreating the custom adapter by integration `Totem::ConfigTypes::Adapter` abstract class. Here has two methods must be implement:\n`read` and `write`. For example, let us write a INI adapter:\n\n```crystal\nrequire \"ini\"\n\nclass INIAdapter < Totem::ConfigTypes::Adapter\n  def read(raw)\n    INI.parse(raw)\n  end\n\n  def write(io, config)\n    config.settings.each do |key, items|\n      next unless data = items.as_h?\n      io << \"[\" << key << \"]\\n\"\n      data.each do |name, value|\n        io << name << \" = \" << value << \"\\n\"\n      end\n    end\n  end\nend\n\n# Do not forget register it\nTotem::ConfigTypes.register_adapter(\"ini\", INIAdapter.new)\n# Also you can set aliases\nTotem::ConfigTypes.register_alias(\"cnf\", \"ini\")\n```\n\nMore examples to review [built-in adapters](https://github.com/icyleaf/totem/blob/master/src/totem/config_types).\n\n### Write a remote provider\n\nCreating the custom remote provider by integration `Totem::RemoteProviders::Adapter` abstract class. Here has two methods must be implement:\n`read` and `get`, please reivew the [built-in remote providers](https://github.com/icyleaf/totem/blob/master/src/totem/remote_providers).\n\n## Q & A\n\n### How to debug?\n\nYou can use Crystal built-in `#pp` or `#pp!` method to prints a series of instance variables:\n\n```\n#<Totem::Config\n @config_paths=[\"/etc/totem\", \"~/.totem\"],\n @config_name=\"config\",\n @config_type=\"json\",\n @key_delimiter=\".\",\n @automatic_env=false,\n @env_prefix=nil,\n @aliases={\"user\" => \"profile.user.name\"},\n @overrides={\"profile\" => {\"user\" => {\"gender\" => \"male\"}}, \"name\" => \"foo\"},\n @config={\"profile\" => {\"user\" => {\"gender\" => \"unkown\"}}, \"name\" => \"bar\"}},\n @env={\"name\" => \"TOTEM_NAME\"},\n @defaults={\"name\" => \"alana\"}>\n```\n\n## Help and Discussion\n\nYou can browse the API documents:\n\nhttps://icyleaf.github.io/totem/\n\nYou can browse the Changelog:\n\nhttps://github.com/icyleaf/totem/blob/master/CHANGELOG.md\n\nIf you have found a bug, please create a issue here:\n\nhttps://github.com/icyleaf/totem/issues/new\n\n## How to Contribute\n\nYour contributions are always welcome! Please submit a pull request or create an issue to add a new question, bug or feature to the list.\n\nAll [Contributors](https://github.com/icyleaf/totem/graphs/contributors) are on the wall.\n\n## You may also like\n\n- [halite](https://github.com/icyleaf/halite) - HTTP Requests Client with a chainable REST API, built-in sessions and middlewares.\n- [markd](https://github.com/icyleaf/markd) - Yet another markdown parser built for speed, Compliant to CommonMark specification.\n- [poncho](https://github.com/icyleaf/poncho) - A .env parser/loader improved for performance.\n- [popcorn](https://github.com/icyleaf/popcorn) - Easy and Safe casting from one type to another.\n- [fast-crystal](https://github.com/icyleaf/fast-crystal) - 💨 Writing Fast Crystal 😍 -- Collect Common Crystal idioms.\n\n## License\n\n[MIT License](https://github.com/icyleaf/totem/blob/master/LICENSE) © icyleaf\n","program":{"html_id":"totem/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"totem","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"totem/Totem","path":"Totem.html","kind":"module","full_name":"Totem","name":"Totem","abstract":false,"locations":[{"filename":"src/totem.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L3"},{"filename":"src/totem/any.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L3"},{"filename":"src/totem/config.cr","line_number":5,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L5"},{"filename":"src/totem/config_builder.cr","line_number":4,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_builder.cr#L4"},{"filename":"src/totem/config_types.cr","line_number":1,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L1"},{"filename":"src/totem/exception.cr","line_number":1,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L1"},{"filename":"src/totem/remote_providers.cr","line_number":1,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L1"},{"filename":"src/totem/utils.cr","line_number":1,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L1"},{"filename":"src/totem/version.cr","line_number":1,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/version.cr#L1"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.7.0\""}],"class_methods":[{"html_id":"from_env(raw:String,key_delimiter:String=Config::KEY_DELIMITER)-class-method","name":"from_env","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"args_string":"(raw : String, key_delimiter : String = Config::KEY_DELIMITER)","args_html":"(raw : String, key_delimiter : String = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem.cr","line_number":28,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L28"},"def":{"name":"from_env","args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"visibility":"Public","body":"parse(raw, \"env\", key_delimiter)"}},{"html_id":"from_file(file:String,paths:Array(String)?=nil,environment:String?=nil,key_delimiter:String=Config::KEY_DELIMITER)-class-method","name":"from_file","abstract":false,"args":[{"name":"file","external_name":"file","restriction":"String"},{"name":"paths","default_value":"nil","external_name":"paths","restriction":"Array(String) | ::Nil"},{"name":"environment","default_value":"nil","external_name":"environment","restriction":"String | ::Nil"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"args_string":"(file : String, paths : Array(String)? = nil, environment : String? = nil, key_delimiter : String = Config::KEY_DELIMITER)","args_html":"(file : String, paths : Array(String)? = <span class=\"n\">nil</span>, environment : String? = <span class=\"n\">nil</span>, key_delimiter : String = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem.cr","line_number":11,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L11"},"def":{"name":"from_file","args":[{"name":"file","external_name":"file","restriction":"String"},{"name":"paths","default_value":"nil","external_name":"paths","restriction":"Array(String) | ::Nil"},{"name":"environment","default_value":"nil","external_name":"environment","restriction":"String | ::Nil"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"visibility":"Public","body":"Config.from_file(file, paths, environment, key_delimiter)"}},{"html_id":"from_json(raw:String,key_delimiter:String=Config::KEY_DELIMITER)-class-method","name":"from_json","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"args_string":"(raw : String, key_delimiter : String = Config::KEY_DELIMITER)","args_html":"(raw : String, key_delimiter : String = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem.cr","line_number":20,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L20"},"def":{"name":"from_json","args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"visibility":"Public","body":"parse(raw, \"json\", key_delimiter)"}},{"html_id":"from_yaml(raw:String,key_delimiter:String=Config::KEY_DELIMITER)-class-method","name":"from_yaml","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"args_string":"(raw : String, key_delimiter : String = Config::KEY_DELIMITER)","args_html":"(raw : String, key_delimiter : String = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem.cr","line_number":24,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L24"},"def":{"name":"from_yaml","args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"visibility":"Public","body":"parse(raw, \"yaml\", key_delimiter)"}},{"html_id":"parse(raw:String,config_type:String,key_delimiter:String=Config::KEY_DELIMITER)-class-method","name":"parse","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"config_type","external_name":"config_type","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"args_string":"(raw : String, config_type : String, key_delimiter : String = Config::KEY_DELIMITER)","args_html":"(raw : String, config_type : String, key_delimiter : String = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem.cr","line_number":16,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L16"},"def":{"name":"parse","args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"config_type","external_name":"config_type","restriction":"String"},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String"}],"visibility":"Public","body":"Config.parse(raw, config_type, key_delimiter)"}}],"constructors":[{"html_id":"new(config_name=\"config\",config_type:String?=nil,config_paths:Array(String)=[]ofString,config_env:String?=nil,config_envs=Config::CONFIG_ENVS,key_delimiter:String?=Config::KEY_DELIMITER)-class-method","name":"new","abstract":false,"args":[{"name":"config_name","default_value":"\"config\"","external_name":"config_name","restriction":""},{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"},{"name":"config_paths","default_value":"[] of String","external_name":"config_paths","restriction":"Array(String)"},{"name":"config_env","default_value":"nil","external_name":"config_env","restriction":"String | ::Nil"},{"name":"config_envs","default_value":"Config::CONFIG_ENVS","external_name":"config_envs","restriction":""},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String | ::Nil"}],"args_string":"(config_name = \"config\", config_type : String? = nil, config_paths : Array(String) = [] of String, config_env : String? = nil, config_envs = Config::CONFIG_ENVS, key_delimiter : String? = Config::KEY_DELIMITER)","args_html":"(config_name = <span class=\"s\">&quot;config&quot;</span>, config_type : String? = <span class=\"n\">nil</span>, config_paths : Array(String) = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, config_env : String? = <span class=\"n\">nil</span>, config_envs = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">CONFIG_ENVS</span>, key_delimiter : String? = <span class=\"t\">Config</span><span class=\"t\">::</span><span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem.cr","line_number":4,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem.cr#L4"},"def":{"name":"new","args":[{"name":"config_name","default_value":"\"config\"","external_name":"config_name","restriction":""},{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"},{"name":"config_paths","default_value":"[] of String","external_name":"config_paths","restriction":"Array(String)"},{"name":"config_env","default_value":"nil","external_name":"config_env","restriction":"String | ::Nil"},{"name":"config_envs","default_value":"Config::CONFIG_ENVS","external_name":"config_envs","restriction":""},{"name":"key_delimiter","default_value":"Config::KEY_DELIMITER","external_name":"key_delimiter","restriction":"String | ::Nil"}],"visibility":"Public","body":"Config.new(config_name, config_type, config_paths, config_env, config_envs, key_delimiter: key_delimiter)"}}],"types":[{"html_id":"totem/Totem/Any","path":"Totem/Any.html","kind":"struct","full_name":"Totem::Any","name":"Any","abstract":false,"superclass":{"html_id":"totem/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"totem/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"totem/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/any.cr","line_number":6,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L6"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"doc":"`Totem::Any` is a convenient wrapper around all possible types(`Totem::Any::Type`) and\ncan be used for traversing dynamic or unkown types.","summary":"<p><code><a href=\"../Totem/Any.html\">Totem::Any</a></code> is a convenient wrapper around all possible types(<code><a href=\"../Totem/Any/Type.html\">Totem::Any::Type</a></code>) and can be used for traversing dynamic or unkown types.</p>","constructors":[{"html_id":"new(raw:Array(_))-class-method","name":"new","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"Array(_)"}],"args_string":"(raw : Array(_))","args_html":"(raw : Array(_))","location":{"filename":"src/totem/any.cr","line_number":14,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L14"},"def":{"name":"new","args":[{"name":"raw","external_name":"raw","restriction":"Array(_)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(raw)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(raw:Hash(String,_))-class-method","name":"new","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"Hash(String, _)"}],"args_string":"(raw : Hash(String, _))","args_html":"(raw : Hash(String, _))","location":{"filename":"src/totem/any.cr","line_number":18,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L18"},"def":{"name":"new","args":[{"name":"raw","external_name":"raw","restriction":"Hash(String, _)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(raw)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(raw:Type)-class-method","name":"new","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"Type"}],"args_string":"(raw : Type)","args_html":"(raw : <a href=\"../Totem/Any/Type.html\">Type</a>)","location":{"filename":"src/totem/any.cr","line_number":11,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L11"},"def":{"name":"new","args":[{"name":"raw","external_name":"raw","restriction":"Type"}],"visibility":"Public","body":"_ = allocate\n_.initialize(raw)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(raw:Any)-class-method","name":"new","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"Any"}],"args_string":"(raw : Any)","args_html":"(raw : <a href=\"../Totem/Any.html\">Any</a>)","location":{"filename":"src/totem/any.cr","line_number":26,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L26"},"def":{"name":"new","args":[{"name":"raw","external_name":"raw","restriction":"Any"}],"visibility":"Public","body":"_ = allocate\n_.initialize(raw)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"==(other:Totem::Any)-instance-method","name":"==","doc":"Returns `true` if both `self` and *other*'s raw object are equal.","summary":"<p>Returns <code>true</code> if both <code>self</code> and <em>other</em>'s raw object are equal.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"Totem::Any"}],"args_string":"(other : Totem::Any)","args_html":"(other : <a href=\"../Totem/Any.html\">Totem::Any</a>)","location":{"filename":"src/totem/any.cr","line_number":215,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L215"},"def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":"Totem::Any"}],"visibility":"Public","body":"raw == other.raw"}},{"html_id":"==(other)-instance-method","name":"==","doc":"Returns `true` if the raw object is equal to *other*.","summary":"<p>Returns <code>true</code> if the raw object is equal to <em>other</em>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":""}],"args_string":"(other)","args_html":"(other)","location":{"filename":"src/totem/any.cr","line_number":220,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L220"},"def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":""}],"visibility":"Public","body":"raw == other"}},{"html_id":"[](key:Int):Any-instance-method","name":"[]","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Int"}],"args_string":"(key : Int) : Any","args_html":"(key : Int) : <a href=\"../Totem/Any.html\">Any</a>","location":{"filename":"src/totem/any.cr","line_number":145,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L145"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"Int"}],"return_type":"Any","visibility":"Public","body":"if value = self[key]?\n  return value\nend\nraise(Error.new(\"Expected Totem::Any for #[](index : Int), not #{@raw.class}\"))\n"}},{"html_id":"[](key:String):Any-instance-method","name":"[]","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any","args_html":"(key : String) : <a href=\"../Totem/Any.html\">Any</a>","location":{"filename":"src/totem/any.cr","line_number":160,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L160"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any","visibility":"Public","body":"if value = self[key]?\n  return value\nend\nraise(Error.new(\"Expected Totem::Any for #[](key : String), not #{@raw.class}\"))\n"}},{"html_id":"[]=(key:String,value:_)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"_"}],"args_string":"(key : String, value : _)","args_html":"(key : String, value : _)","location":{"filename":"src/totem/any.cr","line_number":153,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L153"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"_"}],"visibility":"Public","body":"if as_h?\nelse\n  raise(Error.new(\"Expected Totem::Any for Hash, not #{@raw.class}\"))\nend\nif value.is_a?(Any)\nelse\n  value = Any.new(value)\nend\nas_h[key] = value\n"}},{"html_id":"[]?(key:Int):Any?-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"Int"}],"args_string":"(key : Int) : Any?","args_html":"(key : Int) : <a href=\"../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/any.cr","line_number":168,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L168"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"Int"}],"return_type":"Any | ::Nil","visibility":"Public","body":"object = @raw\nif object.is_a?(Array)\n  object[key]?\nelse\n  if (object.is_a?(JSON::Any) && (json = object.as(JSON::Any))) && json.as_a?\n    as_a[key]?\n  else\n    if (object.is_a?(YAML::Any) && (yaml = object.as(YAML::Any))) && yaml.as_a?\n      as_a[key]?\n    end\n  end\nend\n"}},{"html_id":"[]?(key:String):Any?-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any?","args_html":"(key : String) : <a href=\"../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/any.cr","line_number":179,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L179"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any | ::Nil","visibility":"Public","body":"object = @raw\nif object.is_a?(Hash)\n  object[key]?\nelse\n  if (object.is_a?(JSON::Any) && (json = object.as(JSON::Any))) && json.as_h?\n    as_h[key]?\n  else\n    if (object.is_a?(YAML::Any) && (yaml = object.as(YAML::Any))) && yaml.as_h?\n      as_h[key]?\n    end\n  end\nend\n"}},{"html_id":"as_a:Array(Any)-instance-method","name":"as_a","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":105,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L105"},"def":{"name":"as_a","return_type":"Array(Any)","visibility":"Public","body":"case object = @raw\nwhen Array\n  object.as(Array)\nwhen YAML::Any, JSON::Any\n  object.as_a.map do |value|\n    Any.new(value)\n  end\nelse\n  Popcorn.cast_error!(object.class.to_s, \"Array\")\nend"}},{"html_id":"as_a?:Array(Any)?-instance-method","name":"as_a?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":99,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L99"},"def":{"name":"as_a?","return_type":"Array(Any) | ::Nil","visibility":"Public","body":"if (@raw.is_a?(Array) || (@raw.is_a?(JSON::Any) && (@raw.as(JSON::Any)).as_a?)) || (@raw.is_a?(YAML::Any) && (@raw.as(YAML::Any)).as_a?)\n  as_a\nend"}},{"html_id":"as_bool-instance-method","name":"as_bool","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":66,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L66"},"def":{"name":"as_bool","visibility":"Public","body":"Popcorn.to_bool(@raw)"}},{"html_id":"as_bool?-instance-method","name":"as_bool?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":62,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L62"},"def":{"name":"as_bool?","visibility":"Public","body":"Popcorn.to_bool?(@raw)"}},{"html_id":"as_f-instance-method","name":"as_f","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":50,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L50"},"def":{"name":"as_f","visibility":"Public","body":"Popcorn.to_float(@raw)"}},{"html_id":"as_f32-instance-method","name":"as_f32","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":58,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L58"},"def":{"name":"as_f32","visibility":"Public","body":"Popcorn.to_float32(@raw)"}},{"html_id":"as_f32?-instance-method","name":"as_f32?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":54,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L54"},"def":{"name":"as_f32?","visibility":"Public","body":"Popcorn.to_float32?(@raw)"}},{"html_id":"as_f?-instance-method","name":"as_f?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":46,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L46"},"def":{"name":"as_f?","visibility":"Public","body":"Popcorn.to_float?(@raw)"}},{"html_id":"as_h:Hash(String,Any)-instance-method","name":"as_h","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":84,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L84"},"def":{"name":"as_h","return_type":"Hash(String, Any)","visibility":"Public","body":"case object = @raw\nwhen Hash\n  object.as(Hash(String, Any))\nwhen YAML::Any, JSON::Any\n  Hash(String, Any).new.tap do |obj|\n    object.as_h.each do |key, value|\n      obj[key.to_s] = Any.new(value)\n    end\n  end\nelse\n  Popcorn.cast_error!(object.class.to_s, \"Hash\")\nend"}},{"html_id":"as_h?:Hash(String,Any)?-instance-method","name":"as_h?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":78,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L78"},"def":{"name":"as_h?","return_type":"Hash(String, Any) | ::Nil","visibility":"Public","body":"if (@raw.is_a?(Hash) || (@raw.is_a?(JSON::Any) && (@raw.as(JSON::Any)).as_h?)) || (@raw.is_a?(YAML::Any) && (@raw.as(YAML::Any)).as_h?)\n  as_h\nend"}},{"html_id":"as_i-instance-method","name":"as_i","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":34,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L34"},"def":{"name":"as_i","visibility":"Public","body":"Popcorn.to_int(@raw)"}},{"html_id":"as_i64-instance-method","name":"as_i64","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":42,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L42"},"def":{"name":"as_i64","visibility":"Public","body":"Popcorn.to_int64(@raw)"}},{"html_id":"as_i64?-instance-method","name":"as_i64?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":38,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L38"},"def":{"name":"as_i64?","visibility":"Public","body":"Popcorn.to_int64?(@raw)"}},{"html_id":"as_i?-instance-method","name":"as_i?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":30,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L30"},"def":{"name":"as_i?","visibility":"Public","body":"Popcorn.to_int?(@raw)"}},{"html_id":"as_nil:Nil-instance-method","name":"as_nil","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":136,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L136"},"def":{"name":"as_nil","return_type":"Nil","visibility":"Public","body":"case object = @raw\nwhen JSON::Any, YAML::Any\n  object.as_nil\nelse\n  object.as(Nil)\nend"}},{"html_id":"as_s-instance-method","name":"as_s","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":116,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L116"},"def":{"name":"as_s","visibility":"Public","body":"case object = @raw\nwhen YAML::Any, JSON::Any\n  object.as_s\nelse\n  object.as(String)\nend"}},{"html_id":"as_s?-instance-method","name":"as_s?","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":125,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L125"},"def":{"name":"as_s?","visibility":"Public","body":"case object = @raw\nwhen YAML::Any, JSON::Any\n  object.as_s?\nwhen String\n  object.as(String)\nelse\n  nil\nend"}},{"html_id":"as_time(timezone:Time::Location?=nil)-instance-method","name":"as_time","abstract":false,"args":[{"name":"timezone","default_value":"nil","external_name":"timezone","restriction":"Time::Location | ::Nil"}],"args_string":"(timezone : Time::Location? = nil)","args_html":"(timezone : Time::Location? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/any.cr","line_number":74,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L74"},"def":{"name":"as_time","args":[{"name":"timezone","default_value":"nil","external_name":"timezone","restriction":"Time::Location | ::Nil"}],"visibility":"Public","body":"Popcorn.to_time(@raw, timezone)"}},{"html_id":"as_time?(timezone:Time::Location?=nil)-instance-method","name":"as_time?","abstract":false,"args":[{"name":"timezone","default_value":"nil","external_name":"timezone","restriction":"Time::Location | ::Nil"}],"args_string":"(timezone : Time::Location? = nil)","args_html":"(timezone : Time::Location? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/any.cr","line_number":70,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L70"},"def":{"name":"as_time?","args":[{"name":"timezone","default_value":"nil","external_name":"timezone","restriction":"Time::Location | ::Nil"}],"visibility":"Public","body":"Popcorn.to_time?(@raw, timezone)"}},{"html_id":"clone-instance-method","name":"clone","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":202,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L202"},"def":{"name":"clone","visibility":"Public","body":"Any.new(@raw.clone)"}},{"html_id":"dup-instance-method","name":"dup","doc":"Returns a shallow copy of this object.\n\nBecause `Value` is a value type, this method returns `self`,\nwhich already involves a shallow copy of this object because\nvalue types are passed by value.","summary":"<p>Returns a shallow copy of this object.</p>","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":198,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L198"},"def":{"name":"dup","visibility":"Public","body":"Any.new(@raw.dup)"}},{"html_id":"hash(hasher)-instance-method","name":"hash","doc":"See `Object#hash(hasher)`","summary":"<p>See <code>Object#hash(hasher)</code></p>","abstract":false,"args":[{"name":"hasher","external_name":"hasher","restriction":""}],"args_string":"(hasher)","args_html":"(hasher)","location":{"filename":"src/totem/any.cr","line_number":207,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L207"},"def":{"name":"hash","args":[{"name":"hasher","external_name":"hasher","restriction":""}],"visibility":"Public","body":"hasher = raw.hash(hasher)\nhasher\n"}},{"html_id":"raw:Type-instance-method","name":"raw","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":9,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L9"},"def":{"name":"raw","return_type":"Type","visibility":"Public","body":"@raw"}},{"html_id":"size:Int-instance-method","name":"size","abstract":false,"location":{"filename":"src/totem/any.cr","line_number":190,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L190"},"def":{"name":"size","return_type":"Int","visibility":"Public","body":"if (object = as_a? || as_h?)\n  return object.size\nend\nraise(Error.new(\"Expected Array, Hash, JSON::Any and YAML::Any for #size, not #{@raw.class}\"))\n"}}],"types":[{"html_id":"totem/Totem/Any/Type","path":"Totem/Any/Type.html","kind":"alias","full_name":"Totem::Any::Type","name":"Type","abstract":false,"locations":[{"filename":"src/totem/any.cr","line_number":7,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/any.cr#L7"}],"repository_name":"totem","program":false,"enum":false,"alias":true,"aliased":"(Array(Totem::Any) | Bool | Float64 | Hash(String, Totem::Any) | Int32 | Int64 | JSON::Any | String | Time | YAML::Any | Nil)","aliased_html":"Array(<a href=\"../../Totem/Any.html\">Totem::Any</a>) | Bool | Float64 | Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>) | Int32 | Int64 | JSON::Any | String | Time | YAML::Any | Nil","const":false,"namespace":{"html_id":"totem/Totem/Any","kind":"struct","full_name":"Totem::Any","name":"Any"}}]},{"html_id":"totem/Totem/Config","path":"Totem/Config.html","kind":"class","full_name":"Totem::Config","name":"Config","abstract":false,"superclass":{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"totem/Totem/Utils/HashHelper","kind":"module","full_name":"Totem::Utils::HashHelper","name":"HashHelper"},{"html_id":"totem/Totem/Utils/FileHelper","kind":"module","full_name":"Totem::Utils::FileHelper","name":"FileHelper"},{"html_id":"totem/Totem/Utils/EnvHelper","kind":"module","full_name":"Totem::Utils::EnvHelper","name":"EnvHelper"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/config.cr","line_number":13,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L13"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"CONFIG_ENVS","name":"CONFIG_ENVS","value":"[\"development\", \"test\", \"production\"] of ::String"},{"id":"CONFIG_NAME","name":"CONFIG_NAME","value":"\"config\""},{"id":"KEY_DELIMITER","name":"KEY_DELIMITER","value":"\".\""}],"included_modules":[{"html_id":"totem/Totem/Utils/EnvHelper","kind":"module","full_name":"Totem::Utils::EnvHelper","name":"EnvHelper"},{"html_id":"totem/Totem/Utils/FileHelper","kind":"module","full_name":"Totem::Utils::FileHelper","name":"FileHelper"},{"html_id":"totem/Totem/Utils/HashHelper","kind":"module","full_name":"Totem::Utils::HashHelper","name":"HashHelper"}],"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"doc":"`Totem::Config` is the core configuration reader, parser and writer.\n\nThe config type are avaiable in:\n\n- yaml/yml\n- json\n- env (depend on [poncho](https://github.com/icyleaf/poncho))","summary":"<p><code><a href=\"../Totem/Config.html\">Totem::Config</a></code> is the core configuration reader, parser and writer.</p>","class_methods":[{"html_id":"from_file(file:String,paths:Array(String)?=nil,environment:String?=nil,key_delimiter:String?=KEY_DELIMITER)-class-method","name":"from_file","doc":"Load configuration from a file\n\n```\nTotem::Config.from_file(\"config.yaml\", [\"/etc/totem\", \"~/.totem\", \"./\"])\n```","summary":"<p>Load configuration from a file</p>","abstract":false,"args":[{"name":"file","external_name":"file","restriction":"String"},{"name":"paths","default_value":"nil","external_name":"paths","restriction":"Array(String) | ::Nil"},{"name":"environment","default_value":"nil","external_name":"environment","restriction":"String | ::Nil"},{"name":"key_delimiter","default_value":"KEY_DELIMITER","external_name":"key_delimiter","restriction":"String | ::Nil"}],"args_string":"(file : String, paths : Array(String)? = nil, environment : String? = nil, key_delimiter : String? = KEY_DELIMITER)","args_html":"(file : String, paths : Array(String)? = <span class=\"n\">nil</span>, environment : String? = <span class=\"n\">nil</span>, key_delimiter : String? = <span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem/config.cr","line_number":27,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L27"},"def":{"name":"from_file","args":[{"name":"file","external_name":"file","restriction":"String"},{"name":"paths","default_value":"nil","external_name":"paths","restriction":"Array(String) | ::Nil"},{"name":"environment","default_value":"nil","external_name":"environment","restriction":"String | ::Nil"},{"name":"key_delimiter","default_value":"KEY_DELIMITER","external_name":"key_delimiter","restriction":"String | ::Nil"}],"visibility":"Public","body":"config_name = File.basename(file, File.extname(file))\nconfig_type = Utils.config_type(file)\ninstance = new(config_name, config_type, key_delimiter: key_delimiter)\nif config_paths = paths\n  config_paths.each do |path|\n    instance.config_paths << path\n  end\nelse\n  instance.config_paths << (File.dirname(file))\nend\ninstance.config_env = environment\ninstance.load!\ninstance\n"}},{"html_id":"parse(raw:String,type:String,key_delimiter:String?=KEY_DELIMITER)-class-method","name":"parse","doc":"Parse configuration from a raw string.","summary":"<p>Parse configuration from a raw string.</p>","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"type","external_name":"type","restriction":"String"},{"name":"key_delimiter","default_value":"KEY_DELIMITER","external_name":"key_delimiter","restriction":"String | ::Nil"}],"args_string":"(raw : String, type : String, key_delimiter : String? = KEY_DELIMITER)","args_html":"(raw : String, type : String, key_delimiter : String? = <span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem/config.cr","line_number":47,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L47"},"def":{"name":"parse","args":[{"name":"raw","external_name":"raw","restriction":"String"},{"name":"type","external_name":"type","restriction":"String"},{"name":"key_delimiter","default_value":"KEY_DELIMITER","external_name":"key_delimiter","restriction":"String | ::Nil"}],"visibility":"Public","body":"instance = new(config_type: type, key_delimiter: key_delimiter)\ninstance.parse(raw)\ninstance\n"}}],"constructors":[{"html_id":"new(config_name=CONFIG_NAME,config_type:String?=nil,config_paths:Array(String)=[]ofString,config_env:String?=nil,config_envs=CONFIG_ENVS,key_delimiter=KEY_DELIMITER)-class-method","name":"new","abstract":false,"args":[{"name":"config_name","default_value":"CONFIG_NAME","external_name":"config_name","restriction":""},{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"},{"name":"config_paths","default_value":"[] of String","external_name":"config_paths","restriction":"Array(String)"},{"name":"config_env","default_value":"nil","external_name":"config_env","restriction":"String | ::Nil"},{"name":"config_envs","default_value":"CONFIG_ENVS","external_name":"config_envs","restriction":""},{"name":"key_delimiter","default_value":"KEY_DELIMITER","external_name":"key_delimiter","restriction":""}],"args_string":"(config_name = CONFIG_NAME, config_type : String? = nil, config_paths : Array(String) = [] of String, config_env : String? = nil, config_envs = CONFIG_ENVS, key_delimiter = KEY_DELIMITER)","args_html":"(config_name = <span class=\"t\">CONFIG_NAME</span>, config_type : String? = <span class=\"n\">nil</span>, config_paths : Array(String) = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, config_env : String? = <span class=\"n\">nil</span>, config_envs = <span class=\"t\">CONFIG_ENVS</span>, key_delimiter = <span class=\"t\">KEY_DELIMITER</span>)","location":{"filename":"src/totem/config.cr","line_number":65,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L65"},"def":{"name":"new","args":[{"name":"config_name","default_value":"CONFIG_NAME","external_name":"config_name","restriction":""},{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"},{"name":"config_paths","default_value":"[] of String","external_name":"config_paths","restriction":"Array(String)"},{"name":"config_env","default_value":"nil","external_name":"config_env","restriction":"String | ::Nil"},{"name":"config_envs","default_value":"CONFIG_ENVS","external_name":"config_envs","restriction":""},{"name":"key_delimiter","default_value":"KEY_DELIMITER","external_name":"key_delimiter","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(config_name, config_type, config_paths, config_env, config_envs, key_delimiter)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](key:String):Any-instance-method","name":"[]","doc":"Alias to `get` method.\n\n```\ntotem[\"id\"]\ntotem[\"user.name\"]\n```","summary":"<p>Alias to <code><a href=\"../Totem/Config.html#get%28key%3AString%29%3AAny-instance-method\">#get</a></code> method.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any","args_html":"(key : String) : <a href=\"../Totem/Any.html\">Any</a>","location":{"filename":"src/totem/config.cr","line_number":123,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L123"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any","visibility":"Public","body":"get(key)"}},{"html_id":"[]=(key:String,value:T)forallT-instance-method","name":"[]=","doc":"Alias to `set` method.\n\n```\ntotem[\"id\"] = 123\ntotem[\"user.name\"] = \"foobar\"\n```","summary":"<p>Alias to <code><a href=\"../Totem/Config.html#set%28key%3AString%2Cvalue%3AT%29forallT-instance-method\">#set</a></code> method.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(key : String, value : T) forall T","args_html":"(key : String, value : T) forall T","location":{"filename":"src/totem/config.cr","line_number":113,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L113"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"visibility":"Public","body":"set(key, value)"}},{"html_id":"[]?(key:String):Any?-instance-method","name":"[]?","doc":"Alias to `fetch` method but return `Nil` if not exists.\n\n```\ntotem[\"id\"]?\ntotem[\"user.name\"]?\n```","summary":"<p>Alias to <code><a href=\"../Totem/Config.html#fetch%28key%3AString%2Cdefault_value%3AAny%7CAny%3A%3AType%29%3AAny-instance-method\">#fetch</a></code> method but return <code>Nil</code> if not exists.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any?","args_html":"(key : String) : <a href=\"../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/config.cr","line_number":133,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L133"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any | ::Nil","visibility":"Public","body":"find(key)"}},{"html_id":"add_remote(*,provider:String?=nil,**options)-instance-method","name":"add_remote","doc":"Add a remote provider\n\nTwo arguments must passed:\n\n- `endpoint`: the url of endporint.\n- `provider`: The name of provider, ignore it if endpoint's scheme is same as provider.\n\n#### Redis\n\nYou can get value access the key:\n\n```\ntotem.add_remote(provider: \"redis\", endpoint: \"redis://user:pass@localhost:6379/1\")\n# Or make it shorter\ntotem.add_remote(endpoint: \"redis://user:pass@localhost:6379/1\")\n\ntotem.get(\"user:id\") # => \"123\"\n```\n\nYou can get value from raw json access the path\n\n```\ntotem.add_remote(endpoint: \"redis://user:pass@localhost:6379/1\", path: \"config:production.json\")\ntotem.get(\"user:id\") # => \"123\"\n```","summary":"<p>Add a remote provider</p>","abstract":false,"args":[{"name":"","external_name":"","restriction":""},{"name":"provider","default_value":"nil","external_name":"provider","restriction":"String | ::Nil"}],"args_string":"(*, provider : String? = nil, **options)","args_html":"(*, provider : String? = <span class=\"n\">nil</span>, **options)","location":{"filename":"src/totem/config.cr","line_number":301,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L301"},"def":{"name":"add_remote","args":[{"name":"","external_name":"","restriction":""},{"name":"provider","default_value":"nil","external_name":"provider","restriction":"String | ::Nil"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"if endpoint = options[:endpoint]?\nelse\n  raise(RemoteProviderError.new(\"Missing the endpoint\"))\nend\nif provider\nelse\n  provider = (URI.parse(endpoint.not_nil!)).scheme\nend\nif (name = provider) && (RemoteProviders.has_key?(name))\n  @logger.info do\n    \"Adding #{name}:#{endpoint} to remote config list\"\n  end\n  @remote_provider = RemoteProviders.connect(name, **options)\n  kvstores = RemoteProviders[name].read(@config_type)\n  if kvstores.nil? && (path = options[:path]?)\n    raise(RemoteProviderError.new(\"Can not read config with path: #{path}, make sure sets config_type before this call or named path with file extension.\"))\n  end\n  if kvstores\n    kvstores.not_nil!.each do |key, value|\n      set_value_from(@kvstores, key, value)\n    end\n  end\nelse\n  raise(UnsupportedRemoteProviderError.new(\"Unsupport remote provider: #{provider}\"))\nend\n"}},{"html_id":"alias(alias_key:String,key:String)-instance-method","name":"alias","doc":"Register an aliase\n\n```\ntotem.set(\"food\", \"apple\")\ntotem.alias(\"f\", \"food\")\n\ntotem.set(\"user.name\", \"foobar\")\ntotem.alias(\"username\", \"user.name\")\n```","summary":"<p>Register an aliase</p>","abstract":false,"args":[{"name":"alias_key","external_name":"alias_key","restriction":"String"},{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(alias_key : String, key : String)","args_html":"(alias_key : String, key : String)","location":{"filename":"src/totem/config.cr","line_number":219,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L219"},"def":{"name":"alias","args":[{"name":"alias_key","external_name":"alias_key","restriction":"String"},{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"@aliases[alias_key.downcase] = key.downcase"}},{"html_id":"automatic_env(prefix:String?=nil)-instance-method","name":"automatic_env","doc":"Enable and load ENV variables to Totem to search.\n\nIt provide an argument to quick define the env prefix(`env_prefix=`)\n\n```\nENV[\"TOTEM_ENV\"] = \"development\"\n\ntotem.automatic_env(\"totem\")\ntotem.get(\"env\") # => \"development\"\n```","summary":"<p>Enable and load ENV variables to Totem to search.</p>","abstract":false,"args":[{"name":"prefix","default_value":"nil","external_name":"prefix","restriction":"String | ::Nil"}],"args_string":"(prefix : String? = nil)","args_html":"(prefix : String? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/config.cr","line_number":271,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L271"},"def":{"name":"automatic_env","args":[{"name":"prefix","default_value":"nil","external_name":"prefix","restriction":"String | ::Nil"}],"visibility":"Public","body":"if prefix\n  @env_prefix = prefix.not_nil!.upcase\nend\n@automatic_env = true\n"}},{"html_id":"bind_env(key:String,real_key:String?=nil)-instance-method","name":"bind_env","doc":"Bind a key to a ENV vairable\n\nIf only a key is provided, it will use the `ENV` key matching the key, upcased.\n\nIt will append env prefix when `env_prefix` is seted and the key is not provided.\n\n> Case-sensitive for a key.\n\n```\ntotem.bind_env(\"HOME\")\ntotem.bind_env(\"root_path\", \"HOME\")\n\ntotem.get(\"home\")\ntotem.get(\"root_path\")\n```","summary":"<p>Bind a key to a ENV vairable</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"real_key","default_value":"nil","external_name":"real_key","restriction":"String | ::Nil"}],"args_string":"(key : String, real_key : String? = nil)","args_html":"(key : String, real_key : String? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/config.cr","line_number":238,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L238"},"def":{"name":"bind_env","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"real_key","default_value":"nil","external_name":"real_key","restriction":"String | ::Nil"}],"visibility":"Public","body":"key = key.downcase\nenv_key = real_key ? real_key.not_nil! : env_key(key, @env_prefix)\n@env[key] = env_key\n"}},{"html_id":"clear!-instance-method","name":"clear!","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":419,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L419"},"def":{"name":"clear!","visibility":"Public","body":"@config_name = CONFIG_NAME\n@config_type = nil\n@config_paths = [] of String\n@config_env = nil\n@config_envs = CONFIG_ENVS\n@key_delimiter = KEY_DELIMITER\n@logger = default_logger\n@debugging = false\n@automatic_env = false\n@aliases = Hash(String, String).new\n@overrides = Hash(String, Any).new\n@config = Hash(String, Any).new\n@env = Hash(String, String).new\n@kvstores = Hash(String, Any).new\n@defaults = Hash(String, Any).new\n"}},{"html_id":"config_env:String?-instance-method","name":"config_env","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":57,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L57"},"def":{"name":"config_env","visibility":"Public","body":"@config_env"}},{"html_id":"config_env=(config_env)-instance-method","name":"config_env=","abstract":false,"args":[{"name":"config_env","external_name":"config_env","restriction":""}],"args_string":"(config_env)","args_html":"(config_env)","location":{"filename":"src/totem/config.cr","line_number":57,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L57"},"def":{"name":"config_env=","args":[{"name":"config_env","external_name":"config_env","restriction":""}],"visibility":"Public","body":"@config_env = config_env"}},{"html_id":"config_envs:Array(String)-instance-method","name":"config_envs","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":58,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L58"},"def":{"name":"config_envs","visibility":"Public","body":"@config_envs"}},{"html_id":"config_envs=(config_envs)-instance-method","name":"config_envs=","abstract":false,"args":[{"name":"config_envs","external_name":"config_envs","restriction":""}],"args_string":"(config_envs)","args_html":"(config_envs)","location":{"filename":"src/totem/config.cr","line_number":58,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L58"},"def":{"name":"config_envs=","args":[{"name":"config_envs","external_name":"config_envs","restriction":""}],"visibility":"Public","body":"@config_envs = config_envs"}},{"html_id":"config_file:String?-instance-method","name":"config_file","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":53,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L53"},"def":{"name":"config_file","return_type":"String | ::Nil","visibility":"Public","body":"@config_file"}},{"html_id":"config_name:String-instance-method","name":"config_name","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":55,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L55"},"def":{"name":"config_name","visibility":"Public","body":"@config_name"}},{"html_id":"config_name=(config_name)-instance-method","name":"config_name=","abstract":false,"args":[{"name":"config_name","external_name":"config_name","restriction":""}],"args_string":"(config_name)","args_html":"(config_name)","location":{"filename":"src/totem/config.cr","line_number":55,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L55"},"def":{"name":"config_name=","args":[{"name":"config_name","external_name":"config_name","restriction":""}],"visibility":"Public","body":"@config_name = config_name"}},{"html_id":"config_paths:Array(String)-instance-method","name":"config_paths","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":54,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L54"},"def":{"name":"config_paths","visibility":"Public","body":"@config_paths"}},{"html_id":"config_paths=(config_paths)-instance-method","name":"config_paths=","abstract":false,"args":[{"name":"config_paths","external_name":"config_paths","restriction":""}],"args_string":"(config_paths)","args_html":"(config_paths)","location":{"filename":"src/totem/config.cr","line_number":54,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L54"},"def":{"name":"config_paths=","args":[{"name":"config_paths","external_name":"config_paths","restriction":""}],"visibility":"Public","body":"@config_paths = config_paths"}},{"html_id":"config_type:String?-instance-method","name":"config_type","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":56,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L56"},"def":{"name":"config_type","visibility":"Public","body":"@config_type"}},{"html_id":"config_type=(config_type)-instance-method","name":"config_type=","abstract":false,"args":[{"name":"config_type","external_name":"config_type","restriction":""}],"args_string":"(config_type)","args_html":"(config_type)","location":{"filename":"src/totem/config.cr","line_number":56,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L56"},"def":{"name":"config_type=","args":[{"name":"config_type","external_name":"config_type","restriction":""}],"visibility":"Public","body":"@config_type = config_type"}},{"html_id":"debugging=(value:Bool)-instance-method","name":"debugging=","doc":"Debugging switch","summary":"<p>Debugging switch</p>","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Bool"}],"args_string":"(value : Bool)","args_html":"(value : Bool)","location":{"filename":"src/totem/config.cr","line_number":440,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L440"},"def":{"name":"debugging=","args":[{"name":"value","external_name":"value","restriction":"Bool"}],"visibility":"Public","body":"@logger.level = value ? :debug : :error\n@debugging = value\n"}},{"html_id":"each(&)-instance-method","name":"each","doc":"Returns an iterator over the `#settings` entries.","summary":"<p>Returns an iterator over the <code><a href=\"../Totem/Config.html#settings%3AHash%28String%2CAny%29-instance-method\">#settings</a></code> entries.</p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":539,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L539"},"def":{"name":"each","yields":2,"visibility":"Public","body":"settings.each do |key, value|\n  yield key, value\nend"}},{"html_id":"env_prefix:String?-instance-method","name":"env_prefix","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":60,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L60"},"def":{"name":"env_prefix","return_type":"String | ::Nil","visibility":"Public","body":"@env_prefix"}},{"html_id":"env_prefix=(prefix:String)-instance-method","name":"env_prefix=","doc":"Defines a `ENV` prefix\n\nIf defined with \"totem\", Totem will look for env variables that start with \"TOTEM_\"\n\n> It always upcase the prefix.\n\n```\nENV[\"TOTEM_ENV\"] = \"development\"\n\ntotem.env_prefix = \"totem\"\ntotem.bind_env(\"env\")\ntotem.get(\"env\") # => \"development\"\n```","summary":"<p>Defines a <code>ENV</code> prefix</p>","abstract":false,"args":[{"name":"prefix","external_name":"prefix","restriction":"String"}],"args_string":"(prefix : String)","args_html":"(prefix : String)","location":{"filename":"src/totem/config.cr","line_number":257,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L257"},"def":{"name":"env_prefix=","args":[{"name":"prefix","external_name":"prefix","restriction":"String"}],"visibility":"Public","body":"@env_prefix = prefix.upcase"}},{"html_id":"fetch(key:String,default_value:Any|Any::Type):Any-instance-method","name":"fetch","doc":"Similar to `get` method but returns given value if key not exists.\n\n> Case-insensitive for a key.\n\n```\ntotem.fetch(\"env\", \"development\") => \"development\"\n```","summary":"<p>Similar to <code><a href=\"../Totem/Config.html#get%28key%3AString%29%3AAny-instance-method\">#get</a></code> method but returns given value if key not exists.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"default_value","external_name":"default_value","restriction":"Any | Any::Type"}],"args_string":"(key : String, default_value : Any | Any::Type) : Any","args_html":"(key : String, default_value : <a href=\"../Totem/Any.html\">Any</a> | <a href=\"../Totem/Any/Type.html\">Any::Type</a>) : <a href=\"../Totem/Any.html\">Any</a>","location":{"filename":"src/totem/config.cr","line_number":202,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L202"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"default_value","external_name":"default_value","restriction":"Any | Any::Type"}],"return_type":"Any","visibility":"Public","body":"if value = fetch(key)\n  return value\nend\ndefault_value.is_a?(Any) ? default_value : Any.new(default_value)\n"}},{"html_id":"fetch(key:String):Any?-instance-method","name":"fetch","doc":"Similar to `get` method but returns `Nil` if key not exists.\n\n> Case-insensitive for a key.\n\n```\ntotem.fetch(\"env\")  => \"development\" or nil.\n```","summary":"<p>Similar to <code><a href=\"../Totem/Config.html#get%28key%3AString%29%3AAny-instance-method\">#get</a></code> method but returns <code>Nil</code> if key not exists.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any?","args_html":"(key : String) : <a href=\"../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/config.cr","line_number":189,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L189"},"def":{"name":"fetch","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any | ::Nil","visibility":"Public","body":"if value = find(key)\n  return value\nend"}},{"html_id":"flat_keys:Array(String)-instance-method","name":"flat_keys","doc":"Returns all keys holding a value, regardless of where they are set.\n\nNested keys are returns with a `#key_delimiter` (= \".\") separator.","summary":"<p>Returns all keys holding a value, regardless of where they are set.</p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":526,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L526"},"def":{"name":"flat_keys","return_type":"Array(String)","visibility":"Public","body":"keys = flat_merge(@aliases, @overrides, @env, @config, @defaults, source: {} of String => Bool)\nkeys.each_with_object([] of String) do |__arg0, obj|\n  key = __arg0[0]\n  obj << key\nend\n"}},{"html_id":"get(key:String):Any-instance-method","name":"get","doc":"Gets any value by given key\n\nThe behavior of returning the value associated with the first\nplace from where it is set. following order:\n- override\n- env\n- config file\n- key/value store\n- default\n\n> Case-insensitive for a key.\n\n```\ntotem.get(\"id\")\ntotem.get(\"user.name\")\n```","summary":"<p>Gets any value by given key</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any","args_html":"(key : String) : <a href=\"../Totem/Any.html\">Any</a>","location":{"filename":"src/totem/config.cr","line_number":174,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L174"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any","visibility":"Public","body":"if value = find(key)\n  return value\nend\nraise(NotFoundConfigKeyError.new(\"Not found config: #{key}\"))\n"}},{"html_id":"has_key?(key:String):Bool-instance-method","name":"has_key?","doc":"Checks to see if the key has been set in any of the data locations.\n\n> Case-insensitive for a key.","summary":"<p>Checks to see if the key has been set in any of the data locations.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Bool","args_html":"(key : String) : Bool","location":{"filename":"src/totem/config.cr","line_number":140,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L140"},"def":{"name":"has_key?","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Bool","visibility":"Public","body":"find(key) ? true : false"}},{"html_id":"key_delimiter:String-instance-method","name":"key_delimiter","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":59,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L59"},"def":{"name":"key_delimiter","visibility":"Public","body":"@key_delimiter"}},{"html_id":"key_delimiter=(key_delimiter)-instance-method","name":"key_delimiter=","abstract":false,"args":[{"name":"key_delimiter","external_name":"key_delimiter","restriction":""}],"args_string":"(key_delimiter)","args_html":"(key_delimiter)","location":{"filename":"src/totem/config.cr","line_number":59,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L59"},"def":{"name":"key_delimiter=","args":[{"name":"key_delimiter","external_name":"key_delimiter","restriction":""}],"visibility":"Public","body":"@key_delimiter = key_delimiter"}},{"html_id":"keys-instance-method","name":"keys","doc":"Returns an iterator over the key of `#settings` entries.","summary":"<p>Returns an iterator over the key of <code><a href=\"../Totem/Config.html#settings%3AHash%28String%2CAny%29-instance-method\">#settings</a></code> entries.</p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":534,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L534"},"def":{"name":"keys","visibility":"Public","body":"settings.keys"}},{"html_id":"load!-instance-method","name":"load!","doc":"Load configuration file from disk, searching in the defined paths.\n\n```\ntotem = Totem.new(\"config\")\ntotem.config_paths << \"/etc/totem\" << \"~/.totem\"\nbegin\n  totem.load!\nrescue e\n  puts \"Fatal error config file: #{e.message}\"\nend\n```","summary":"<p>Load configuration file from disk, searching in the defined paths.</p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":334,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L334"},"def":{"name":"load!","visibility":"Public","body":"if file = find_config\nelse\n  return\nend\nload_file!(file)\n"}},{"html_id":"load_file!(file:String)-instance-method","name":"load_file!","doc":"Load configuration file by given file name.\n\nIt will ignore the values of `config_name`, `config_type` and `config_paths`.\n\n```\ntotem = Totem.new(\"config\", \"json\")\ntotem.config_paths << \"/etc/totem\" << \"~/.totem\"\n\nbegin\n  totem.load_file!(\"~/config/development.yaml\")\nrescue e\n  puts \"Fatal error config file: #{e.message}\"\nend\n```","summary":"<p>Load configuration file by given file name.</p>","abstract":false,"args":[{"name":"file","external_name":"file","restriction":"String"}],"args_string":"(file : String)","args_html":"(file : String)","location":{"filename":"src/totem/config.cr","line_number":353,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L353"},"def":{"name":"load_file!","args":[{"name":"file","external_name":"file","restriction":"String"}],"visibility":"Public","body":"@logger.info do\n  \"Attempting to read in config file\"\nend\n@logger.debug do\n  \"Reading file: #{file}\"\nend\n@config_file = file\n@config_type = config_type(file)\nFile.open(file) do |io|\n  parse(io)\nend\n"}},{"html_id":"mapping(converter:T.class,key:String?=nil)forallT-instance-method","name":"mapping","doc":"Mapping JSON/YAML Serializable to Struct with key\n\n```\nstruct Clothes\n  include JSON::Serializable\n  # or\n  # include YAML::Serializable\n\n  property jacket : String\n  property trousers : String\n  property pants : Hash(String, String)\nend\n\nclothes = totem.mapping(Clothes, \"clothing\")\nclothes.jacket # => \"leather\"\n```","summary":"<p>Mapping JSON/YAML Serializable to Struct with key</p>","abstract":false,"args":[{"name":"converter","external_name":"converter","restriction":"T.class"},{"name":"key","default_value":"nil","external_name":"key","restriction":"String | ::Nil"}],"args_string":"(converter : T.class, key : String? = nil) forall T","args_html":"(converter : <span class=\"t\">T</span>.<span class=\"k\">class</span>, key : String? = <span class=\"n\">nil</span>) forall T","location":{"filename":"src/totem/config.cr","line_number":482,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L482"},"def":{"name":"mapping","args":[{"name":"converter","external_name":"converter","restriction":"T.class"},{"name":"key","default_value":"nil","external_name":"key","restriction":"String | ::Nil"}],"visibility":"Public","body":"if key && (!(has_key?(key.not_nil!)))\n  raise(MappingError.new(\"Not found the key in configuration: #{key}\"))\nend\n{% if true %}\n        {{ struct_type = nil }}\n        {% for ancestor in T.ancestors %}\n          {% if ancestor == JSON::Serializable %}\n            {{ struct_type = \"json\" }}\n          {% else %}{% if ancestor == YAML::Serializable %}\n            {{ struct_type = \"yaml\" }}\n          {% end %}{% end %}\n        {% end %}\n\n        {% if struct_type != nil %}\n          raw = key ? find(key.not_nil!).to_{{ struct_type.id }} : to_{{ struct_type.id }}\n          converter.from_{{ struct_type.id }}(raw)\n        {% else %}\n          raise MappingError.new(\"Can not mapping with class: #{T.class}, avaiable in JSON::Serializable, YAML::Serializable\")\n        {% end %}\n      {% end %}\n"}},{"html_id":"parse(raw:String|IO,config_type=@config_type)-instance-method","name":"parse","doc":"Parse raw string with given config type to configuration\n\nThe config type are avaiable in:\n\n- yaml/yml\n- json\n- env","summary":"<p>Parse raw string with given config type to configuration</p>","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String | IO"},{"name":"config_type","default_value":"@config_type","external_name":"config_type","restriction":""}],"args_string":"(raw : String | IO, config_type = @config_type)","args_html":"(raw : String | IO, config_type = @config_type)","location":{"filename":"src/totem/config.cr","line_number":511,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L511"},"def":{"name":"parse","args":[{"name":"raw","external_name":"raw","restriction":"String | IO"},{"name":"config_type","default_value":"@config_type","external_name":"config_type","restriction":""}],"visibility":"Public","body":"if (type = config_type) && (ConfigTypes.has_keys?(type))\nelse\n  raise(UnsupportedConfigError.new(\"Unsupport config type: #{type}\"))\nend\nif data = ConfigTypes[type].read(raw)\nelse\n  return\nend\ndata.each do |key, value|\n  set_value_from(@config, key, value)\nend\n"}},{"html_id":"set(key:String,value:T)forallT-instance-method","name":"set","doc":"Sets the value for the key in the override regiser.\n\nWill be used instead of values obtained via config file, env, default.\n\n> Case-insensitive for a key.\n\n```\ntotem.set(\"id\", 123)\ntotem.set(\"user.name\", \"foobar\")\n```","summary":"<p>Sets the value for the key in the override regiser.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(key : String, value : T) forall T","args_html":"(key : String, value : T) forall T","location":{"filename":"src/totem/config.cr","line_number":154,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L154"},"def":{"name":"set","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"visibility":"Public","body":"set_value_from(@overrides, key, value)"}},{"html_id":"set_default(key:String,value:T)forallT-instance-method","name":"set_default","doc":"Sets the default value for given key\n\n```\ntotem.set_default(\"id\", 123)\ntotem.set_default(\"user.name\", \"foobar\")\n```","summary":"<p>Sets the default value for given key</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(key : String, value : T) forall T","args_html":"(key : String, value : T) forall T","location":{"filename":"src/totem/config.cr","line_number":103,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L103"},"def":{"name":"set_default","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"visibility":"Public","body":"set_value_from(@defaults, key, value)"}},{"html_id":"set_defaults(defaults:Hash(String,_))-instance-method","name":"set_defaults","doc":"Sets the default values with `Hash` data\n\n```\ntotem.set_defaults({\n  \"id\"   => 123,\n  \"user\" => {\n    \"name\" => \"foobar\",\n  },\n})\n```","summary":"<p>Sets the default values with <code>Hash</code> data</p>","abstract":false,"args":[{"name":"defaults","external_name":"defaults","restriction":"Hash(String, _)"}],"args_string":"(defaults : Hash(String, _))","args_html":"(defaults : Hash(String, _))","location":{"filename":"src/totem/config.cr","line_number":91,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L91"},"def":{"name":"set_defaults","args":[{"name":"defaults","external_name":"defaults","restriction":"Hash(String, _)"}],"visibility":"Public","body":"defaults.each do |key, value|\n  set_default(key, value)\nend"}},{"html_id":"set_value_from(source:Hash(String,Totem::Any),key:String,value:T)forallT-instance-method","name":"set_value_from","abstract":false,"args":[{"name":"source","external_name":"source","restriction":"Hash(String, Totem::Any)"},{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"args_string":"(source : Hash(String, Totem::Any), key : String, value : T) forall T","args_html":"(source : Hash(String, <a href=\"../Totem/Any.html\">Totem::Any</a>), key : String, value : T) forall T","location":{"filename":"src/totem/config.cr","line_number":563,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L563"},"def":{"name":"set_value_from","args":[{"name":"source","external_name":"source","restriction":"Hash(String, Totem::Any)"},{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"T"}],"visibility":"Public","body":"key = real_key(key.downcase)\npaths = key.split(@key_delimiter)\nlast_key = paths.pop.downcase\ndeep_hash = deep_search(source, paths)\ndeep_hash[last_key] = Any.new(value)\n"}},{"html_id":"settings:Hash(String,Any)-instance-method","name":"settings","doc":"Returns all settings of configuration.","summary":"<p>Returns all settings of configuration.</p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":546,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L546"},"def":{"name":"settings","return_type":"Hash(String, Any)","visibility":"Public","body":"flat_keys.each_with_object({} of String => Any) do |key, obj|\n  if value = find(key)\n  else\n    next\n  end\n  paths = key.split(@key_delimiter)\n  last_key = paths.pop.downcase\n  hash = deep_search(obj, paths)\n  hash[last_key] = value\nend"}},{"html_id":"store!-instance-method","name":"store!","doc":"Store the current configuration to a file.\n\n```\ntotem = Totem.new(\"config\", \"json\")\ntotem.config_paths << \"/etc/totem\" << \"~/.totem\"\n\nbegin\n  totem.store!\nrescue e\n  puts \"Fatal error config file: #{e.message}\"\nend\n```","summary":"<p>Store the current configuration to a file.</p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":376,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L376"},"def":{"name":"store!","visibility":"Public","body":"if file = @config_file\n  if file.empty?\n    raise(Error.new(\"Config file is empty\"))\n  end\n  store_file!(file, true)\nend\nraise(Error.new(\"Config file is not be setted\"))\n"}},{"html_id":"store_file!(file:String,force:Bool=false)-instance-method","name":"store_file!","doc":"Store current configuration to a given file.\n\nIt will ignore the values of `config_name`, `config_type` and `config_paths`.\n\n```\ntotem = Totem.new(\"config\", \"json\")\n\nbegin\n  totem.store_file!(\"~/config.yaml\", force: true)\nrescue e\n  puts \"Fatal error config file: #{e.message}\"\nend\n```","summary":"<p>Store current configuration to a given file.</p>","abstract":false,"args":[{"name":"file","external_name":"file","restriction":"String"},{"name":"force","default_value":"false","external_name":"force","restriction":"Bool"}],"args_string":"(file : String, force : Bool = false)","args_html":"(file : String, force : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/totem/config.cr","line_number":398,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L398"},"def":{"name":"store_file!","args":[{"name":"file","external_name":"file","restriction":"String"},{"name":"force","default_value":"false","external_name":"force","restriction":"Bool"}],"visibility":"Public","body":"@logger.info do\n  \"Attempting to write configuration to file: #{file}\"\nend\nif extname = config_type(file)\nelse\n  raise(\"Requires vaild extension name with file: #{file}\")\nend\nif ConfigTypes.has_keys?(extname)\nelse\n  raise(UnsupportedConfigError.new(\"Unsupport config type: #{extname}\"))\nend\nif (!force) && (File.exists?(file))\n  raise(Error.new(\"File #{file} exists. Use write_config(force: true) to overwrite\"))\nend\nmode = \"w\"\nFile.open(file, mode) do |f|\n  ConfigTypes[extname].write(f, self)\nend\n"}},{"html_id":"to_h-instance-method","name":"to_h","doc":"Alias to `#settings`","summary":"<p>Alias to <code><a href=\"../Totem/Config.html#settings%3AHash%28String%2CAny%29-instance-method\">#settings</a></code></p>","abstract":false,"location":{"filename":"src/totem/config.cr","line_number":559,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config.cr#L559"},"def":{"name":"to_h","visibility":"Public","body":"settings"}}]},{"html_id":"totem/Totem/ConfigBuilder","path":"Totem/ConfigBuilder.html","kind":"module","full_name":"Totem::ConfigBuilder","name":"ConfigBuilder","abstract":false,"locations":[{"filename":"src/totem/config_builder.cr","line_number":62,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_builder.cr#L62"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"doc":"Builder of Configuration\n\n#### Load config\n\n```\nstruct Config\n  include Totem::ConfigBuilder\n\n  build do\n    config_type \"yaml\"\n    config_paths [\"/etc\", \"~/.config/totem\", \"config\"]\n  end\nend\n\nconfig = Config.configure\nconfig[\"name\"] # => \"foo\"\n```\n\n#### Load config with custom file\n\n```\nstruct Config\n  include Totem::ConfigBuilder\n\n  build do\n    config_type \"yaml\"\n    config_paths [\"/etc\", \"~/.config/totem\", \"config\"]\n  end\nend\n\nconfig = Config.configure(\"/path/to/config/config.example.json\")\nconfig[\"name\"] # => \"foo\"\n```\n\n#### Load config and mapping to struct\n\n```\nstruct Profile\n  include Totem::ConfigBuilder\n\n  property name : String\n  property gender : String\n\n  build do\n    config_type \"yaml\"\n    config_paths [\"/etc\", \"~/.config/totem\", \"config/\"]\n  end\nend\n\nconfig = Profile.configure do |c|\n  c.set_default(\"gender\", \"unkown\")\nend\n\nconfig.name     # => \"foo\"\nconfig.gender   # => \"unkown\"\nconfig[\"title\"] # => \"bar\"\n```","summary":"<p>Builder of Configuration</p>","macros":[{"html_id":"build-macro","name":"build","doc":"Build block","summary":"<p>Build block</p>","abstract":false,"location":{"filename":"src/totem/config_builder.cr","line_number":108,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_builder.cr#L108"},"def":{"name":"build","visibility":"Public","body":"      def self.config_paths(value : Array(String))\n        @@config.config_paths = value\n      \nend\n\n      def self.config_name(value : String)\n        @@config.config_name = value\n      \nend\n\n      def self.config_type(value : String)\n        @@config.config_type = value\n      \nend\n\n      def self.config_env(value : String)\n        @@config.config_env = value\n      \nend\n\n      def self.config_envs(value : Array(String))\n        @@config.config_envs = value\n      \nend\n\n      def self.key_delimiter(value : String)\n        @@config.key_delimiter = value\n      \nend\n\n      def self.env_prefix(value : String)\n        @@config.env_prefix = value\n      \nend\n\n      def self.env_prefix(value : String)\n        @@config.env_prefix = value\n      \nend\n\n      def self.automatic_env(value : Bool)\n        @@config.automatic_env = value\n      \nend\n\n      def self.automatic_env(value : String)\n        @@config.automatic_env(value)\n      \nend\n\n      def self.debugging(value : Bool)\n        @@config.debugging = value\n      \nend\n\n      \n{{ yield }}\n\n    \n"}}]},{"html_id":"totem/Totem/ConfigTypes","path":"Totem/ConfigTypes.html","kind":"module","full_name":"Totem::ConfigTypes","name":"ConfigTypes","abstract":false,"locations":[{"filename":"src/totem/config_types.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L3"},{"filename":"src/totem/config_types/env.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/env.cr#L3"},{"filename":"src/totem/config_types/json.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/json.cr#L3"},{"filename":"src/totem/config_types/yaml.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/yaml.cr#L3"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"doc":"Config types","summary":"<p>Config types</p>","class_methods":[{"html_id":"[](name:String)-class-method","name":"[]","doc":"Returns the value for the key given by *key*.","summary":"<p>Returns the value for the key given by <em>key</em>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/totem/config_types.cr","line_number":43,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L43"},"def":{"name":"[]","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"@@adapters[normalize(name)]"}},{"html_id":"has_keys?(name:String)-class-method","name":"has_keys?","doc":"Returns `true` when key given by *key* exists, otherwise `false`.","summary":"<p>Returns <code>true</code> when key given by <em>key</em> exists, otherwise <code>false</code>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/totem/config_types.cr","line_number":48,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L48"},"def":{"name":"has_keys?","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"keys.includes?(name)"}},{"html_id":"keys-class-method","name":"keys","doc":"Returns a new `Array` with all the keys.","summary":"<p>Returns a new <code>Array</code> with all the keys.</p>","abstract":false,"location":{"filename":"src/totem/config_types.cr","line_number":53,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L53"},"def":{"name":"keys","visibility":"Public","body":"@@adapters.keys.concat(@@aliases.keys)"}},{"html_id":"register(adapter:Adapter,name:String,*shortcuts)-class-method","name":"register","doc":"Register config type\n\n```\nTotem::ConfigTypes.register(Totem::ConfigTypes::YAML.new, \"yaml\", \"yml\")\n```","summary":"<p>Register config type</p>","abstract":false,"args":[{"name":"adapter","external_name":"adapter","restriction":"Adapter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"shortcuts","external_name":"shortcuts","restriction":""}],"args_string":"(adapter : Adapter, name : String, *shortcuts)","args_html":"(adapter : <a href=\"../Totem/ConfigTypes/Adapter.html\">Adapter</a>, name : String, *shortcuts)","location":{"filename":"src/totem/config_types.cr","line_number":12,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L12"},"def":{"name":"register","args":[{"name":"adapter","external_name":"adapter","restriction":"Adapter"},{"name":"name","external_name":"name","restriction":"String"},{"name":"shortcuts","external_name":"shortcuts","restriction":""}],"splat_index":2,"visibility":"Public","body":"@@adapters[name] = adapter\nif shortcuts.empty?\nelse\n  shortcuts.each do |shortcut|\n    if shortcut.is_a?(String)\n    else\n      next\n    end\n    @@aliases[shortcut] = name\n  end\nend\n"}},{"html_id":"register_adapter(name:String,adapter:Adapter)-class-method","name":"register_adapter","doc":"Register config type with name\n\nDEPRECATED: Use `register` directly instead.\n\n```\nTotem::ConfigTypes.register_adapter(\"yaml\", Totem::ConfigTypes::YAML.new)\n```","summary":"<p>Register config type with name</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"adapter","external_name":"adapter","restriction":"Adapter"}],"args_string":"(name : String, adapter : Adapter)","args_html":"(name : String, adapter : <a href=\"../Totem/ConfigTypes/Adapter.html\">Adapter</a>)","location":{"filename":"src/totem/config_types.cr","line_number":27,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L27"},"def":{"name":"register_adapter","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"adapter","external_name":"adapter","restriction":"Adapter"}],"visibility":"Public","body":"@@adapters[name] = adapter"}},{"html_id":"register_alias(shortcut:String,name:String)-class-method","name":"register_alias","doc":"Set alias for registered config type\n\nDEPRECATED: Use `register` directly instead.\n\n```\nTotem::ConfigTypes.register_alias(\"yml\", \"yaml\")\n```","summary":"<p>Set alias for registered config type</p>","abstract":false,"args":[{"name":"shortcut","external_name":"shortcut","restriction":"String"},{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(shortcut : String, name : String)","args_html":"(shortcut : String, name : String)","location":{"filename":"src/totem/config_types.cr","line_number":38,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L38"},"def":{"name":"register_alias","args":[{"name":"shortcut","external_name":"shortcut","restriction":"String"},{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"@@aliases[shortcut] = name"}}],"types":[{"html_id":"totem/Totem/ConfigTypes/Adapter","path":"Totem/ConfigTypes/Adapter.html","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter","abstract":true,"superclass":{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/config_types.cr","line_number":62,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L62"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"totem/Totem/ConfigTypes/Env","kind":"class","full_name":"Totem::ConfigTypes::Env","name":"Env"},{"html_id":"totem/Totem/ConfigTypes/JSON","kind":"class","full_name":"Totem::ConfigTypes::JSON","name":"JSON"},{"html_id":"totem/Totem/ConfigTypes/YAML","kind":"class","full_name":"Totem::ConfigTypes::YAML","name":"YAML"}],"namespace":{"html_id":"totem/Totem/ConfigTypes","kind":"module","full_name":"Totem::ConfigTypes","name":"ConfigTypes"},"doc":"Adapter of config type","summary":"<p>Adapter of config type</p>","instance_methods":[{"html_id":"read(raw:String|IO):Hash(String,Totem::Any)-instance-method","name":"read","abstract":true,"args":[{"name":"raw","external_name":"raw","restriction":"String | IO"}],"args_string":"(raw : String | IO) : Hash(String, Totem::Any)","args_html":"(raw : String | IO) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)","location":{"filename":"src/totem/config_types.cr","line_number":63,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L63"},"def":{"name":"read","args":[{"name":"raw","external_name":"raw","restriction":"String | IO"}],"return_type":"Hash(String, Totem::Any)","visibility":"Public","body":""}},{"html_id":"write(io:File,config:Config)-instance-method","name":"write","abstract":true,"args":[{"name":"io","external_name":"io","restriction":"File"},{"name":"config","external_name":"config","restriction":"Config"}],"args_string":"(io : File, config : Config)","args_html":"(io : File, config : <a href=\"../../Totem/Config.html\">Config</a>)","location":{"filename":"src/totem/config_types.cr","line_number":64,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types.cr#L64"},"def":{"name":"write","args":[{"name":"io","external_name":"io","restriction":"File"},{"name":"config","external_name":"config","restriction":"Config"}],"visibility":"Public","body":""}}]},{"html_id":"totem/Totem/ConfigTypes/Env","path":"Totem/ConfigTypes/Env.html","kind":"class","full_name":"Totem::ConfigTypes::Env","name":"Env","abstract":false,"superclass":{"html_id":"totem/Totem/ConfigTypes/Adapter","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter"},"ancestors":[{"html_id":"totem/Totem/ConfigTypes/Adapter","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/config_types/env.cr","line_number":7,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/env.cr#L7"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/ConfigTypes","kind":"module","full_name":"Totem::ConfigTypes","name":"ConfigTypes"},"doc":"DotEnv format Config Type\n\n**Note**: It dependency [poncho](https://github.com/icyleaf/poncho) shard. Install it before use.","summary":"<p>DotEnv format Config Type</p>","instance_methods":[{"html_id":"read(raw:String|IO):Hash(String,Totem::Any)-instance-method","name":"read","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String | IO"}],"args_string":"(raw : String | IO) : Hash(String, Totem::Any)","args_html":"(raw : String | IO) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)","location":{"filename":"src/totem/config_types/env.cr","line_number":8,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/env.cr#L8"},"def":{"name":"read","args":[{"name":"raw","external_name":"raw","restriction":"String | IO"}],"return_type":"Hash(String, Totem::Any)","visibility":"Public","body":"cast_to_any_hash((Poncho.parse(raw)).to_h)"}},{"html_id":"write(io,config)-instance-method","name":"write","abstract":false,"args":[{"name":"io","external_name":"io","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(io, config)","args_html":"(io, config)","location":{"filename":"src/totem/config_types/env.cr","line_number":12,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/env.cr#L12"},"def":{"name":"write","args":[{"name":"io","external_name":"io","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"config.flat_keys.sort.each do |key|\n  if value = config[key]?\n  else\n    next\n  end\n  real_key = (key.gsub(config.key_delimiter, \"_\")).upcase\n  (((io << real_key) << \"=\") << value) << \"\\n\"\nend"}}]},{"html_id":"totem/Totem/ConfigTypes/JSON","path":"Totem/ConfigTypes/JSON.html","kind":"class","full_name":"Totem::ConfigTypes::JSON","name":"JSON","abstract":false,"superclass":{"html_id":"totem/Totem/ConfigTypes/Adapter","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter"},"ancestors":[{"html_id":"totem/Totem/ConfigTypes/Adapter","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/config_types/json.cr","line_number":5,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/json.cr#L5"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/ConfigTypes","kind":"module","full_name":"Totem::ConfigTypes","name":"ConfigTypes"},"doc":"Builtin JSON format config type","summary":"<p>Builtin JSON format config type</p>","instance_methods":[{"html_id":"read(raw):Hash(String,Totem::Any)-instance-method","name":"read","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":""}],"args_string":"(raw) : Hash(String, Totem::Any)","args_html":"(raw) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)","location":{"filename":"src/totem/config_types/json.cr","line_number":6,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/json.cr#L6"},"def":{"name":"read","args":[{"name":"raw","external_name":"raw","restriction":""}],"return_type":"Hash(String, Totem::Any)","visibility":"Public","body":"cast_to_any_hash((::JSON.parse(raw)).as_h)"}},{"html_id":"write(io,config)-instance-method","name":"write","abstract":false,"args":[{"name":"io","external_name":"io","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(io, config)","args_html":"(io, config)","location":{"filename":"src/totem/config_types/json.cr","line_number":10,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/json.cr#L10"},"def":{"name":"write","args":[{"name":"io","external_name":"io","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"io.puts(config.settings.to_json)"}}]},{"html_id":"totem/Totem/ConfigTypes/YAML","path":"Totem/ConfigTypes/YAML.html","kind":"class","full_name":"Totem::ConfigTypes::YAML","name":"YAML","abstract":false,"superclass":{"html_id":"totem/Totem/ConfigTypes/Adapter","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter"},"ancestors":[{"html_id":"totem/Totem/ConfigTypes/Adapter","kind":"class","full_name":"Totem::ConfigTypes::Adapter","name":"Adapter"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/config_types/yaml.cr","line_number":5,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/yaml.cr#L5"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/ConfigTypes","kind":"module","full_name":"Totem::ConfigTypes","name":"ConfigTypes"},"doc":"Builtin YAML format config type","summary":"<p>Builtin YAML format config type</p>","instance_methods":[{"html_id":"read(raw):Hash(String,Totem::Any)-instance-method","name":"read","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":""}],"args_string":"(raw) : Hash(String, Totem::Any)","args_html":"(raw) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)","location":{"filename":"src/totem/config_types/yaml.cr","line_number":6,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/yaml.cr#L6"},"def":{"name":"read","args":[{"name":"raw","external_name":"raw","restriction":""}],"return_type":"Hash(String, Totem::Any)","visibility":"Public","body":"cast_to_any_hash((::YAML.parse(raw)).as_h)"}},{"html_id":"write(io,config)-instance-method","name":"write","abstract":false,"args":[{"name":"io","external_name":"io","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(io, config)","args_html":"(io, config)","location":{"filename":"src/totem/config_types/yaml.cr","line_number":10,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/config_types/yaml.cr#L10"},"def":{"name":"write","args":[{"name":"io","external_name":"io","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"io.puts(config.settings.to_yaml)"}}]}]},{"html_id":"totem/Totem/Exception","path":"Totem/Exception.html","kind":"module","full_name":"Totem::Exception","name":"Exception","abstract":false,"locations":[{"filename":"src/totem/exception.cr","line_number":2,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L2"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"types":[{"html_id":"totem/Totem/Exception/MappingError","path":"Totem/Exception/MappingError.html","kind":"class","full_name":"Totem::Exception::MappingError","name":"MappingError","abstract":false,"superclass":{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},"ancestors":[{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},{"html_id":"totem/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/exception.cr","line_number":16,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L16"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/Exception","kind":"module","full_name":"Totem::Exception","name":"Exception"}},{"html_id":"totem/Totem/Exception/NotFoundConfigFileError","path":"Totem/Exception/NotFoundConfigFileError.html","kind":"class","full_name":"Totem::Exception::NotFoundConfigFileError","name":"NotFoundConfigFileError","abstract":false,"superclass":{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},"ancestors":[{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},{"html_id":"totem/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/exception.cr","line_number":6,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L6"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/Exception","kind":"module","full_name":"Totem::Exception","name":"Exception"}},{"html_id":"totem/Totem/Exception/NotFoundConfigKeyError","path":"Totem/Exception/NotFoundConfigKeyError.html","kind":"class","full_name":"Totem::Exception::NotFoundConfigKeyError","name":"NotFoundConfigKeyError","abstract":false,"superclass":{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},"ancestors":[{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},{"html_id":"totem/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/exception.cr","line_number":8,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L8"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/Exception","kind":"module","full_name":"Totem::Exception","name":"Exception"}},{"html_id":"totem/Totem/Exception/RemoteProviderError","path":"Totem/Exception/RemoteProviderError.html","kind":"class","full_name":"Totem::Exception::RemoteProviderError","name":"RemoteProviderError","abstract":false,"superclass":{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},"ancestors":[{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},{"html_id":"totem/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/exception.cr","line_number":14,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L14"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/Exception","kind":"module","full_name":"Totem::Exception","name":"Exception"}},{"html_id":"totem/Totem/Exception/UnsupportedConfigError","path":"Totem/Exception/UnsupportedConfigError.html","kind":"class","full_name":"Totem::Exception::UnsupportedConfigError","name":"UnsupportedConfigError","abstract":false,"superclass":{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},"ancestors":[{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},{"html_id":"totem/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/exception.cr","line_number":10,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L10"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/Exception","kind":"module","full_name":"Totem::Exception","name":"Exception"}},{"html_id":"totem/Totem/Exception/UnsupportedRemoteProviderError","path":"Totem/Exception/UnsupportedRemoteProviderError.html","kind":"class","full_name":"Totem::Exception::UnsupportedRemoteProviderError","name":"UnsupportedRemoteProviderError","abstract":false,"superclass":{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},"ancestors":[{"html_id":"totem/Totem/Exception/Error","kind":"class","full_name":"Totem::Exception::Error","name":"Error"},{"html_id":"totem/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/exception.cr","line_number":12,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/exception.cr#L12"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/Exception","kind":"module","full_name":"Totem::Exception","name":"Exception"}}]},{"html_id":"totem/Totem/RemoteProviders","path":"Totem/RemoteProviders.html","kind":"module","full_name":"Totem::RemoteProviders","name":"RemoteProviders","abstract":false,"locations":[{"filename":"src/totem/remote_providers.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L3"},{"filename":"src/totem/remote_providers/etcd.cr","line_number":4,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/etcd.cr#L4"},{"filename":"src/totem/remote_providers/redis.cr","line_number":4,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L4"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"doc":"Remote provider","summary":"<p>Remote provider</p>","class_methods":[{"html_id":"[](name:String)-class-method","name":"[]","doc":"Returns the value for the key given by *key*.","summary":"<p>Returns the value for the key given by <em>key</em>.</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/totem/remote_providers.cr","line_number":16,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L16"},"def":{"name":"[]","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"@@instance[name]"}},{"html_id":"connect(name:String,**options)-class-method","name":"connect","doc":"Connect remote provider with options","summary":"<p>Connect remote provider with options</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String, **options)","args_html":"(name : String, **options)","location":{"filename":"src/totem/remote_providers.cr","line_number":33,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L33"},"def":{"name":"connect","args":[{"name":"name","external_name":"name","restriction":"String"}],"double_splat":{"name":"options","external_name":"options","restriction":""},"visibility":"Public","body":"cls = @@providers[name]\n@@instance[name] = cls.new(**options)\n"}},{"html_id":"has_key?(key)-class-method","name":"has_key?","doc":"Returns `true` when key given by *key* exists, otherwise `false`.","summary":"<p>Returns <code>true</code> when key given by <em>key</em> exists, otherwise <code>false</code>.</p>","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/totem/remote_providers.cr","line_number":26,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L26"},"def":{"name":"has_key?","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"keys.includes?(key)"}},{"html_id":"keys-class-method","name":"keys","doc":"Returns a new `Array` with all the keys.","summary":"<p>Returns a new <code>Array</code> with all the keys.</p>","abstract":false,"location":{"filename":"src/totem/remote_providers.cr","line_number":21,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L21"},"def":{"name":"keys","visibility":"Public","body":"@@providers.keys"}},{"html_id":"register_adapter(name:String,adapter:Adapter.class)-class-method","name":"register_adapter","doc":"Registe remote provider with name\n\n```\nTotem::ConfigTypes.register_adapter(\"redis\", Totem::RemoteProvider::Redis)\n```","summary":"<p>Registe remote provider with name</p>","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"adapter","external_name":"adapter","restriction":"Adapter.class"}],"args_string":"(name : String, adapter : Adapter.class)","args_html":"(name : String, adapter : <span class=\"t\">Adapter</span>.<span class=\"k\">class</span>)","location":{"filename":"src/totem/remote_providers.cr","line_number":11,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L11"},"def":{"name":"register_adapter","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"adapter","external_name":"adapter","restriction":"Adapter.class"}],"visibility":"Public","body":"@@providers[name] = adapter"}}],"types":[{"html_id":"totem/Totem/RemoteProviders/Adapter","path":"Totem/RemoteProviders/Adapter.html","kind":"class","full_name":"Totem::RemoteProviders::Adapter","name":"Adapter","abstract":true,"superclass":{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/remote_providers.cr","line_number":39,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L39"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"totem/Totem/RemoteProviders/Etcd","kind":"class","full_name":"Totem::RemoteProviders::Etcd","name":"Etcd"},{"html_id":"totem/Totem/RemoteProviders/Redis","kind":"class","full_name":"Totem::RemoteProviders::Redis","name":"Redis"}],"namespace":{"html_id":"totem/Totem/RemoteProviders","kind":"module","full_name":"Totem::RemoteProviders","name":"RemoteProviders"},"doc":"Adapter of remote provider","summary":"<p>Adapter of remote provider</p>","instance_methods":[{"html_id":"get(key:String):Any?-instance-method","name":"get","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any?","args_html":"(key : String) : <a href=\"../../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/remote_providers.cr","line_number":41,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L41"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any | ::Nil","visibility":"Public","body":""}},{"html_id":"read(config_type:String?=nil):Hash(String,Totem::Any)?-instance-method","name":"read","abstract":true,"args":[{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"}],"args_string":"(config_type : String? = nil) : Hash(String, Totem::Any)?","args_html":"(config_type : String? = <span class=\"n\">nil</span>) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)?","location":{"filename":"src/totem/remote_providers.cr","line_number":40,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers.cr#L40"},"def":{"name":"read","args":[{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"}],"return_type":"Hash(String, Totem::Any) | ::Nil","visibility":"Public","body":""}}]},{"html_id":"totem/Totem/RemoteProviders/Etcd","path":"Totem/RemoteProviders/Etcd.html","kind":"class","full_name":"Totem::RemoteProviders::Etcd","name":"Etcd","abstract":false,"superclass":{"html_id":"totem/Totem/RemoteProviders/Adapter","kind":"class","full_name":"Totem::RemoteProviders::Adapter","name":"Adapter"},"ancestors":[{"html_id":"totem/Totem/RemoteProviders/Adapter","kind":"class","full_name":"Totem::RemoteProviders::Adapter","name":"Adapter"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/remote_providers/etcd.cr","line_number":8,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/etcd.cr#L8"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/RemoteProviders","kind":"module","full_name":"Totem::RemoteProviders","name":"RemoteProviders"},"doc":"Etcd remote provider\n\n**Note**: It dependency [etcd-crystal](https://github.com/icyleaf/etcd-crystal) shard. Install it before use.","summary":"<p>Etcd remote provider</p>","constructors":[{"html_id":"new(endpoint:String,path:String?=nil)-class-method","name":"new","abstract":false,"args":[{"name":"endpoint","external_name":"endpoint","restriction":"String"},{"name":"path","default_value":"nil","external_name":"path","restriction":"String | ::Nil"}],"args_string":"(endpoint : String, path : String? = nil)","args_html":"(endpoint : String, path : String? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/remote_providers/etcd.cr","line_number":9,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/etcd.cr#L9"},"def":{"name":"new","args":[{"name":"endpoint","external_name":"endpoint","restriction":"String"},{"name":"path","default_value":"nil","external_name":"path","restriction":"String | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(endpoint, path)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"get(key:String):Any?-instance-method","name":"get","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any?","args_html":"(key : String) : <a href=\"../../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/remote_providers/etcd.cr","line_number":25,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/etcd.cr#L25"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any | ::Nil","visibility":"Public","body":"if value = get?(key)\n  Any.new(value)\nend"}},{"html_id":"get?(key)-instance-method","name":"get?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/totem/remote_providers/etcd.cr","line_number":31,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/etcd.cr#L31"},"def":{"name":"get?","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"begin\n  if key.starts_with?(\"/\")\n  else\n    key = \"/#{key}\"\n  end\n  (@client.get(key)).value\nrescue ::Etcd::KeyNotFound\n  nil\nend"}},{"html_id":"read(config_type:String?=nil):Hash(String,Totem::Any)?-instance-method","name":"read","abstract":false,"args":[{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"}],"args_string":"(config_type : String? = nil) : Hash(String, Totem::Any)?","args_html":"(config_type : String? = <span class=\"n\">nil</span>) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)?","location":{"filename":"src/totem/remote_providers/etcd.cr","line_number":15,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/etcd.cr#L15"},"def":{"name":"read","args":[{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"}],"return_type":"Hash(String, Totem::Any) | ::Nil","visibility":"Public","body":"if (path = @path) && (value = get?(path))\n  if value.nil?\n    return\n  end\n  if config_type\n  else\n    config_type = Utils.config_type(path)\n  end\n  if (name = config_type) && (ConfigTypes.has_keys?(name))\n    return ConfigTypes[name].read(value)\n  end\nend"}}]},{"html_id":"totem/Totem/RemoteProviders/Redis","path":"Totem/RemoteProviders/Redis.html","kind":"class","full_name":"Totem::RemoteProviders::Redis","name":"Redis","abstract":false,"superclass":{"html_id":"totem/Totem/RemoteProviders/Adapter","kind":"class","full_name":"Totem::RemoteProviders::Adapter","name":"Adapter"},"ancestors":[{"html_id":"totem/Totem/RemoteProviders/Adapter","kind":"class","full_name":"Totem::RemoteProviders::Adapter","name":"Adapter"},{"html_id":"totem/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"totem/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/totem/remote_providers/redis.cr","line_number":8,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L8"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"totem/Totem/RemoteProviders","kind":"module","full_name":"Totem::RemoteProviders","name":"RemoteProviders"},"doc":"Redis remote provider\n\n**Note**: It dependency [crystal-redis](https://github.com/stefanwille/crystal-redis) shard. Install it before use.","summary":"<p>Redis remote provider</p>","constructors":[{"html_id":"new(endpoint:String,path:String?=nil)-class-method","name":"new","abstract":false,"args":[{"name":"endpoint","external_name":"endpoint","restriction":"String"},{"name":"path","default_value":"nil","external_name":"path","restriction":"String | ::Nil"}],"args_string":"(endpoint : String, path : String? = nil)","args_html":"(endpoint : String, path : String? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":9,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L9"},"def":{"name":"new","args":[{"name":"endpoint","external_name":"endpoint","restriction":"String"},{"name":"path","default_value":"nil","external_name":"path","restriction":"String | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(endpoint, path)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"get(key:String):Any?-instance-method","name":"get","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Any?","args_html":"(key : String) : <a href=\"../../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":23,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L23"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Any | ::Nil","visibility":"Public","body":"if value = get_str(key)\n  return Any.new(value)\nend\nif value = get_hash(key)\n  return Any.new(value)\nend\nif value = get_set(key)\n  return Any.new(value)\nend\nif value = get_zset(key)\n  return Any.new(value)\nend\n"}},{"html_id":"get_hash(key:String)-instance-method","name":"get_hash","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":47,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L47"},"def":{"name":"get_hash","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"begin\n  Hash(String, Any).new.tap do |obj|\n    (@client.hgetall(key)).each_slice(2) do |result|\n      name, value = result\n      obj[name.to_s] = handle_value(value)\n    end\n  end\nrescue ::Redis::Error\n  nil\nend"}},{"html_id":"get_set(key:String)-instance-method","name":"get_set","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":58,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L58"},"def":{"name":"get_set","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"begin\n  values = @client.smembers(key)\n  values.each_with_object(Array(Any).new) do |value, obj|\n    obj << (handle_value(value))\n  end\nrescue ::Redis::Error\n  nil\nend"}},{"html_id":"get_str(key:String)-instance-method","name":"get_str","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":41,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L41"},"def":{"name":"get_str","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"begin\n  @client.get(key)\nrescue ::Redis::Error\n  nil\nend"}},{"html_id":"get_zset(key:String)-instance-method","name":"get_zset","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String)","args_html":"(key : String)","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":67,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L67"},"def":{"name":"get_zset","args":[{"name":"key","external_name":"key","restriction":"String"}],"visibility":"Public","body":"begin\n  Hash(String, Any).new.tap do |obj|\n    (@client.zrange(key, 0, -1, true)).each_slice(2) do |result|\n      value, name = result\n      obj[name.to_s] = handle_value(value)\n    end\n  end\nrescue ::Redis::Error\n  nil\nend"}},{"html_id":"read(config_type:String?=nil):Hash(String,Totem::Any)?-instance-method","name":"read","abstract":false,"args":[{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"}],"args_string":"(config_type : String? = nil) : Hash(String, Totem::Any)?","args_html":"(config_type : String? = <span class=\"n\">nil</span>) : Hash(String, <a href=\"../../Totem/Any.html\">Totem::Any</a>)?","location":{"filename":"src/totem/remote_providers/redis.cr","line_number":13,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/remote_providers/redis.cr#L13"},"def":{"name":"read","args":[{"name":"config_type","default_value":"nil","external_name":"config_type","restriction":"String | ::Nil"}],"return_type":"Hash(String, Totem::Any) | ::Nil","visibility":"Public","body":"if (path = @path) && (value = get_str(path))\n  if value.nil? || value.empty?\n    return\n  end\n  if config_type\n  else\n    config_type = Utils.config_type(path)\n  end\n  if (name = config_type) && (ConfigTypes.has_keys?(name))\n    return ConfigTypes[name].read(value)\n  end\nend"}}]}]},{"html_id":"totem/Totem/Utils","path":"Totem/Utils.html","kind":"module","full_name":"Totem::Utils","name":"Utils","abstract":false,"locations":[{"filename":"src/totem/utils.cr","line_number":2,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L2"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"totem/Totem/Utils/EnvHelper","kind":"module","full_name":"Totem::Utils::EnvHelper","name":"EnvHelper"},{"html_id":"totem/Totem/Utils/FileHelper","kind":"module","full_name":"Totem::Utils::FileHelper","name":"FileHelper"},{"html_id":"totem/Totem/Utils/HashHelper","kind":"module","full_name":"Totem::Utils::HashHelper","name":"HashHelper"}],"namespace":{"html_id":"totem/Totem","kind":"module","full_name":"Totem","name":"Totem"},"types":[{"html_id":"totem/Totem/Utils/EnvHelper","path":"Totem/Utils/EnvHelper.html","kind":"module","full_name":"Totem::Utils::EnvHelper","name":"EnvHelper","abstract":false,"locations":[{"filename":"src/totem/utils.cr","line_number":12,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L12"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"totem/Totem/Config","kind":"class","full_name":"Totem::Config","name":"Config"}],"namespace":{"html_id":"totem/Totem/Utils","kind":"module","full_name":"Totem::Utils","name":"Utils"},"instance_methods":[{"html_id":"env_key(key:String,env_prefix:String?=nil)-instance-method","name":"env_key","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"env_prefix","default_value":"nil","external_name":"env_prefix","restriction":"String | ::Nil"}],"args_string":"(key : String, env_prefix : String? = nil)","args_html":"(key : String, env_prefix : String? = <span class=\"n\">nil</span>)","location":{"filename":"src/totem/utils.cr","line_number":13,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L13"},"def":{"name":"env_key","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"env_prefix","default_value":"nil","external_name":"env_prefix","restriction":"String | ::Nil"}],"visibility":"Public","body":"new_key = key.upcase\nif (prefix = env_prefix) && (!prefix.empty?)\n  if prefix[-1] == '_'\n    prefix = prefix[0..-2]\n  end\n  return new_key.starts_with?(prefix) ? new_key : \"#{prefix.upcase}_#{new_key}\"\nend\nnew_key\n"}}]},{"html_id":"totem/Totem/Utils/FileHelper","path":"Totem/Utils/FileHelper.html","kind":"module","full_name":"Totem::Utils::FileHelper","name":"FileHelper","abstract":false,"locations":[{"filename":"src/totem/utils.cr","line_number":3,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L3"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"totem/Totem/Config","kind":"class","full_name":"Totem::Config","name":"Config"}],"namespace":{"html_id":"totem/Totem/Utils","kind":"module","full_name":"Totem::Utils","name":"Utils"},"instance_methods":[{"html_id":"config_type(file:String)-instance-method","name":"config_type","abstract":false,"args":[{"name":"file","external_name":"file","restriction":"String"}],"args_string":"(file : String)","args_html":"(file : String)","location":{"filename":"src/totem/utils.cr","line_number":4,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L4"},"def":{"name":"config_type","args":[{"name":"file","external_name":"file","restriction":"String"}],"visibility":"Public","body":"name = File.basename(file)\nif name.starts_with?(\".\")\n  name = \"xxx.#{name}\"\nend\next = File.extname(name)\next.size > 1 ? ext[1..-1] : nil\n"}}]},{"html_id":"totem/Totem/Utils/HashHelper","path":"Totem/Utils/HashHelper.html","kind":"module","full_name":"Totem::Utils::HashHelper","name":"HashHelper","abstract":false,"locations":[{"filename":"src/totem/utils.cr","line_number":24,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L24"}],"repository_name":"totem","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"totem/Totem/Config","kind":"class","full_name":"Totem::Config","name":"Config"}],"namespace":{"html_id":"totem/Totem/Utils","kind":"module","full_name":"Totem::Utils","name":"Utils"},"instance_methods":[{"html_id":"deep_search(source:Hash(String,String|Any),paths:Array(String)):Any|Hash(String,Any)-instance-method","name":"deep_search","abstract":false,"args":[{"name":"source","external_name":"source","restriction":"Hash(String, String | Any)"},{"name":"paths","external_name":"paths","restriction":"Array(String)"}],"args_string":"(source : Hash(String, String | Any), paths : Array(String)) : Any | Hash(String, Any)","args_html":"(source : Hash(String, String | <a href=\"../../Totem/Any.html\">Any</a>), paths : Array(String)) : <a href=\"../../Totem/Any.html\">Any</a> | Hash(String, <a href=\"../../Totem/Any.html\">Any</a>)","location":{"filename":"src/totem/utils.cr","line_number":34,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L34"},"def":{"name":"deep_search","args":[{"name":"source","external_name":"source","restriction":"Hash(String, String | Any)"},{"name":"paths","external_name":"paths","restriction":"Array(String)"}],"return_type":"Any | Hash(String, Any)","visibility":"Public","body":"paths.each do |path|\n  subtree = source[path]?\n  if subtree\n  else\n    hash = Totem::Any.new(Hash(String, Any).new)\n    source[path] = hash\n    source = hash\n    next\n  end\n  source = if subtree.is_a?(Any)\n    subtree.as_h\n  else\n    if subtree.is_a?(Hash)\n      subtree.as(Hash(String, Any))\n    else\n      hash = Hash(String, Any).new\n      source[path] = Any.new(hash)\n      hash\n    end\n  end\nend\nsource\n"}},{"html_id":"has_value?(source:Hash(String,String|Any),paths:Array(String)):Any?-instance-method","name":"has_value?","abstract":false,"args":[{"name":"source","external_name":"source","restriction":"Hash(String, String | Any)"},{"name":"paths","external_name":"paths","restriction":"Array(String)"}],"args_string":"(source : Hash(String, String | Any), paths : Array(String)) : Any?","args_html":"(source : Hash(String, String | <a href=\"../../Totem/Any.html\">Any</a>), paths : Array(String)) : <a href=\"../../Totem/Any.html\">Any</a>?","location":{"filename":"src/totem/utils.cr","line_number":25,"url":"https://github.com/icyleaf/totem/blob/35723712e9fd449a09948862584f4c2efb2ce42e/src/totem/utils.cr#L25"},"def":{"name":"has_value?","args":[{"name":"source","external_name":"source","restriction":"Hash(String, String | Any)"},{"name":"paths","external_name":"paths","restriction":"Array(String)"}],"return_type":"Any | ::Nil","visibility":"Public","body":"if paths.size.zero?\n  return Any.new(source)\nend\nif value = source[paths.first]?\n  if paths.size == 1\n    return value.is_a?(Any) ? value : Any.new(value)\n  end\n  if value.is_a?(Any) && value.as_h?\n    has_value?(value.as_h, paths[1..-1])\n  end\nend\n"}}]}]}]}]}}